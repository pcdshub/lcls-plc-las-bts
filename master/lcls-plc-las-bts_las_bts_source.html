<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DUTs &mdash; pcdshub/lcls-plc-las-bts  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/doctr-versions-menu.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Data Types" href="lcls-plc-las-bts_las_bts_epics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pcdshub/lcls-plc-las-bts
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">lcls-plc-las-bts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_pragmas.html">Pragmas</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_nc.html">NC Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_boxes.html">Boxes</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_links.html">Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">las_bts</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_las_bts_summary.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_las_bts_summary.html#pragmas">Pragmas</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_las_bts_summary.html#libraries">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_las_bts_summary.html#symbols">Symbols</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_las_bts_epics.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="lcls-plc-las-bts_las_bts_epics.html#database-records">Database Records</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DUTs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#st-epicsmotormsta">ST_EpicsMotorMSTA</a></li>
<li class="toctree-l2"><a class="reference internal" href="#st-shuttercontrol">ST_ShutterControl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#st-sourcedatastore">ST_SourceDataStore</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#gvls">GVLs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gvl-btps">GVL_BTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-btps-constants">GVL_BTPS_Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-btps-retain">GVL_BTPS_Retain</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-bts-vac">GVL_BTS_VAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-com">GVL_COM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-constants">GVL_Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-shutters">GVL_Shutters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-variables">GVL_Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#pous">POUs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#diagnostics">DIAGNOSTICS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#f-isvalveready">F_IsValveReady</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-destinationdatastore">FB_DestinationDataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-epicsmotormonitor">FB_EpicsMotorMonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-epicsstatsmonitor">FB_EpicsStatsMonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-rangecomparison">FB_RangeComparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-shuttersafety">FB_ShutterSafety</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-test-epicscentroidmonitor">FB_Test_EpicsCentroidMonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-test-epicsmotormonitor">FB_Test_EpicsMotorMonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-testrangecomparison">FB_TestRangeComparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fb-testshuttersafety">FB_TestShutterSafety</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main">MAIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-btps">PRG_BTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-com">PRG_COM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-gauges">PRG_GAUGES</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-pumps">PRG_PUMPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-runtests">PRG_RunTests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-saveperistentvariables">PRG_SavePeristentVariables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prg-valves">PRG_VALVES</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pcdshub/lcls-plc-las-bts</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>DUTs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lcls-plc-las-bts_las_bts_source.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="duts">
<h1>DUTs<a class="headerlink" href="#duts" title="Permalink to this headline"></a></h1>
<section id="st-epicsmotormsta">
<h2>ST_EpicsMotorMSTA<a class="headerlink" href="#st-epicsmotormsta" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TYPE</span> <span class="n">ST_EpicsMotorMSTA</span> <span class="p">:</span>
<span class="n">STRUCT</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">DIRECTION</span><span class="p">:</span> <span class="n">last</span> <span class="n">raw</span> <span class="n">direction</span><span class="p">;</span> <span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="n">Negative</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">Positive</span><span class="p">)</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bPositiveDirection</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">DONE</span><span class="p">:</span> <span class="n">motion</span> <span class="ow">is</span> <span class="n">complete</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bDone</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">PLUS_LS</span><span class="p">:</span> <span class="n">plus</span> <span class="n">limit</span> <span class="n">switch</span> <span class="n">has</span> <span class="n">been</span> <span class="n">hit</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bPlusLimitSwitch</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">HOMELS</span><span class="p">:</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">home</span> <span class="n">limit</span> <span class="n">switch</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bHomeLimitSwitch</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">Unused</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bUnused0</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">POSITION</span><span class="p">:</span> <span class="n">closed</span><span class="o">-</span><span class="n">loop</span> <span class="n">position</span> <span class="n">control</span> <span class="ow">is</span> <span class="n">enabled</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bClosedLoop</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">SLIP_STALL</span><span class="p">:</span> <span class="n">Slip</span><span class="o">/</span><span class="n">Stall</span> <span class="n">detected</span> <span class="p">(</span><span class="n">eg</span><span class="o">.</span> <span class="n">fatal</span> <span class="n">following</span> <span class="n">error</span><span class="p">)</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bSlipStall</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">HOME</span><span class="p">:</span> <span class="k">if</span> <span class="n">at</span> <span class="n">home</span> <span class="n">position</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bHome</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">PRESENT</span><span class="p">:</span> <span class="n">encoder</span> <span class="ow">is</span> <span class="n">present</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bEncoderPresent</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">PROBLEM</span><span class="p">:</span> <span class="n">driver</span> <span class="n">stopped</span> <span class="n">polling</span><span class="p">,</span> <span class="ow">or</span> <span class="n">hardware</span> <span class="n">problem</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bHardwareProblem</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">MOVING</span><span class="p">:</span> <span class="n">non</span><span class="o">-</span><span class="n">zero</span> <span class="n">velocity</span> <span class="n">present</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bMoving</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">GAIN_SUPPORT</span><span class="p">:</span> <span class="n">motor</span> <span class="n">supports</span> <span class="n">closed</span><span class="o">-</span><span class="n">loop</span> <span class="n">position</span> <span class="n">control</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bGainSupport</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">COMM_ERR</span><span class="p">:</span> <span class="n">Controller</span> <span class="n">communication</span> <span class="n">error</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bCommError</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">MINUS_LS</span><span class="p">:</span> <span class="n">minus</span> <span class="n">limit</span> <span class="n">switch</span> <span class="n">has</span> <span class="n">been</span> <span class="n">hit</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bMinusLimitSwitch</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">HOMED</span><span class="p">:</span> <span class="n">the</span> <span class="n">motor</span> <span class="n">has</span> <span class="n">been</span> <span class="n">homed</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">bHomed</span> <span class="p">:</span> <span class="n">BIT</span><span class="p">;</span>

<span class="n">END_STRUCT</span>
<span class="n">END_TYPE</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#st-epicsmotormsta">ST_EpicsMotorMSTA</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="st-shuttercontrol">
<h2>ST_ShutterControl<a class="headerlink" href="#st-shuttercontrol" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TYPE</span> <span class="n">ST_ShutterControl</span> <span class="p">:</span>
<span class="n">STRUCT</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">REQ</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">io</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">LSS</span> <span class="n">Shutter</span> <span class="n">Open</span> <span class="n">Request</span>
    <span class="s1">&#39;}</span>
    <span class="n">bOpenRequest</span> <span class="n">AT</span> <span class="o">%</span><span class="n">Q</span><span class="o">*</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">OPN</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">i</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">LSS</span> <span class="n">Shutter</span> <span class="n">Open</span>
    <span class="s1">&#39;}</span>
    <span class="n">bOpenStatus</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">CLS</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">i</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">LSS</span> <span class="n">Shutter</span> <span class="n">Closed</span>
    <span class="s1">&#39;}</span>
    <span class="n">bCloseStatus</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">LSS</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">i</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">LSS</span> <span class="n">Permission</span> <span class="n">Status</span>
    <span class="s1">&#39;}</span>
    <span class="n">bLssStatus</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

<span class="n">END_STRUCT</span>
<span class="n">END_TYPE</span>
</pre></div>
</div>
</section>
<section id="st-sourcedatastore">
<h2>ST_SourceDataStore<a class="headerlink" href="#st-sourcedatastore" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TYPE</span> <span class="n">ST_SourceDataStore</span> <span class="p">:</span>
<span class="n">STRUCT</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: Name; io: input&#39;</span><span class="p">}</span>
    <span class="n">sName</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">;</span>

    <span class="p">(</span><span class="o">*</span>  <span class="n">Do</span> <span class="ow">not</span> <span class="n">pragma</span> <span class="n">valve</span><span class="p">;</span> <span class="n">Use</span> <span class="n">original</span> <span class="n">PVs</span> <span class="n">to</span> <span class="n">access</span> <span class="n">valve</span> <span class="n">state</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">fbSourceValve</span> <span class="p">:</span> <span class="n">REFERENCE</span> <span class="n">TO</span> <span class="n">FB_VGC</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Valid</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Data</span> <span class="n">Invalid</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Data</span> <span class="n">Valid</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZSV</span> <span class="n">MAJOR</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">OSV</span> <span class="n">NO_ALARM</span>
    <span class="s1">&#39;}</span>
    <span class="n">bDataValid</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">EntryValveReady</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Not</span> <span class="n">ready</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Ready</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZSV</span> <span class="n">MAJOR</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">OSV</span> <span class="n">NO_ALARM</span>
    <span class="s1">&#39;}</span>
    <span class="n">bEntryValveReady</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">ChecksOK</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Failed</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Passed</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZSV</span> <span class="n">MAJOR</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">OSV</span> <span class="n">NO_ALARM</span>
    <span class="s1">&#39;}</span>
    <span class="n">bChecksOK</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: Linear&#39;</span><span class="p">}</span>
    <span class="n">fbLinear</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: Rotary&#39;</span><span class="p">}</span>
    <span class="n">fbRotary</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: Goniometer&#39;</span><span class="p">}</span>
    <span class="n">fbGoniometer</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: NFCenterX&#39;</span><span class="p">}</span>
    <span class="n">fbNFCentroidX</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: NFCenterY&#39;</span><span class="p">}</span>
    <span class="n">fbNFCentroidY</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: FFCenterX&#39;</span><span class="p">}</span>
    <span class="n">fbFFCentroidX</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: FFCenterY&#39;</span><span class="p">}</span>
    <span class="n">fbFFCentroidY</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>

<span class="n">END_STRUCT</span>
<span class="n">END_TYPE</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-rangecomparison">FB_RangeComparison</a></p></li>
</ul>
</dd>
</dl>
</section>
</section>
<section id="gvls">
<h1>GVLs<a class="headerlink" href="#gvls" title="Permalink to this headline"></a></h1>
<section id="gvl-btps">
<h2>GVL_BTPS<a class="headerlink" href="#gvl-btps" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span>
    <span class="p">(</span><span class="o">*</span>
    <span class="n">Motor</span> <span class="o">-</span> <span class="n">Linear</span>
        <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m1</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m1</span><span class="p">)</span>
        <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m4</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m4</span><span class="p">)</span>
        <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m7</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m7</span><span class="p">)</span>
    <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B1Lin</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m1</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay1Linear</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B3Lin</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m4</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay3Linear</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B4Lin</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m7</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay4Linear</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>

    <span class="p">(</span><span class="o">*</span>
        <span class="n">Motor</span> <span class="o">-</span> <span class="n">Rotary</span>
            <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m2</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m2</span><span class="p">)</span>
            <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m6</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m6</span><span class="p">)</span>
            <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m8</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m8</span><span class="p">)</span>
    <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B1Rot</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m2</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay1Rotary</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B3Rot</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m6</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay3Rotary</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B4Rot</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m8</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay4Rotary</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>

    <span class="p">(</span><span class="o">*</span>
        <span class="n">Motor</span> <span class="o">-</span> <span class="n">Goniometer</span>
            <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m3</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m3</span><span class="p">)</span>
            <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m5</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m5</span><span class="p">)</span>
            <span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m9</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="o">-</span><span class="n">mcs1</span><span class="p">,</span> <span class="n">las_bts_mcs2_01_m9</span><span class="p">)</span>
    <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B1Gon</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m3</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay1Goniometer</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B3Gon</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m5</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay3Goniometer</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">B4Gon</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">BTS</span><span class="p">:</span><span class="n">MCS2</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">m9</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay4Goniometer</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">Near</span> <span class="n">field</span> <span class="n">camera</span> <span class="n">stats</span> <span class="n">plugins</span><span class="p">,</span> <span class="n">per</span> <span class="n">bay</span> <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">NF1</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">LHN</span><span class="p">:</span><span class="n">BAY1</span><span class="p">:</span><span class="n">CAM</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">Stats2</span><span class="p">:</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay1NearFieldCamStats</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">NF3</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">LHN</span><span class="p">:</span><span class="n">BAY3</span><span class="p">:</span><span class="n">CAM</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">Stats2</span><span class="p">:</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay3NearFieldCamStats</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">NF4</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">LHN</span><span class="p">:</span><span class="n">BAY4</span><span class="p">:</span><span class="n">CAM</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="n">Stats2</span><span class="p">:</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay4NearFieldCamStats</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">Far</span><span class="o">-</span><span class="n">field</span> <span class="n">camera</span> <span class="n">stats</span> <span class="n">plugins</span><span class="p">,</span> <span class="n">per</span> <span class="n">bay</span> <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">FF1</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">LHN</span><span class="p">:</span><span class="n">BAY1</span><span class="p">:</span><span class="n">CAM</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="n">Stats2</span><span class="p">:</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay1FarFieldCamStats</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">FF3</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">LHN</span><span class="p">:</span><span class="n">BAY3</span><span class="p">:</span><span class="n">CAM</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="n">Stats2</span><span class="p">:</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay3FarFieldCamStats</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Chk</span><span class="p">:</span><span class="n">FF4</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">SIM</span><span class="p">)</span><span class="n">LAS</span><span class="p">:</span><span class="n">LHN</span><span class="p">:</span><span class="n">BAY4</span><span class="p">:</span><span class="n">CAM</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="n">Stats2</span><span class="p">:</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbBay4FarFieldCamStats</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: @(BTPS):Shutter:01&#39;</span><span class="p">}</span>
    <span class="n">fbShutterSafety1</span> <span class="p">:</span> <span class="n">FB_ShutterSafety</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: @(BTPS):Shutter:03&#39;</span><span class="p">}</span>
    <span class="n">fbShutterSafety3</span> <span class="p">:</span> <span class="n">FB_ShutterSafety</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: @(BTPS):Shutter:04&#39;</span><span class="p">}</span>
    <span class="n">fbShutterSafety4</span> <span class="p">:</span> <span class="n">FB_ShutterSafety</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: @(BTPS):DEST&#39;</span><span class="p">}</span>
    <span class="n">fbDestinations</span> <span class="p">:</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nDestinations</span><span class="p">]</span> <span class="n">OF</span> <span class="n">FB_DestinationDataStore</span><span class="p">;</span>

<span class="n">END_VAR</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-destinationdatastore">FB_DestinationDataStore</a></p></li>
<li><p><a class="reference internal" href="#fb-epicsmotormonitor">FB_EpicsMotorMonitor</a></p></li>
<li><p><a class="reference internal" href="#fb-epicsstatsmonitor">FB_EpicsStatsMonitor</a></p></li>
<li><p><a class="reference internal" href="#fb-shuttersafety">FB_ShutterSafety</a></p></li>
<li><p><a class="reference internal" href="#gvl-btps-constants">GVL_BTPS_Constants</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="gvl-btps-constants">
<h2>GVL_BTPS_Constants<a class="headerlink" href="#gvl-btps-constants" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span> <span class="n">CONSTANT</span>
    <span class="n">nSources</span> <span class="p">:</span> <span class="n">UINT</span> <span class="o">:=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">Destinations</span>

        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD8</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">TMO</span> <span class="o">-</span> <span class="n">IP1</span>
        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD10</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">TMO</span> <span class="o">-</span> <span class="n">IP2</span>
        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD2</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">TMO</span> <span class="o">-</span> <span class="n">IP3</span>

        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD6</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">RIX</span> <span class="o">-</span> <span class="n">qRIXS</span>
        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD4</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">RIX</span> <span class="o">-</span> <span class="n">ChemRIXS</span>
        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD14</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">XPP</span>

        <span class="n">LTLHN</span><span class="p">:</span><span class="n">LD9</span><span class="p">:</span><span class="n">VGC</span><span class="p">:</span><span class="mi">01</span> <span class="p">(</span><span class="n">ioc</span><span class="o">-</span><span class="n">las</span><span class="o">-</span><span class="n">bts</span><span class="p">)</span> <span class="o">-</span> <span class="n">Laser</span> <span class="n">Lab</span>

    <span class="o">*</span><span class="p">)</span>
    <span class="n">nDestinations</span><span class="p">:</span> <span class="n">UINT</span> <span class="o">:=</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">END_VAR</span>
</pre></div>
</div>
</section>
<section id="gvl-btps-retain">
<h2>GVL_BTPS_Retain<a class="headerlink" href="#gvl-btps-retain" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span> <span class="n">PERSISTENT</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Config</span><span class="p">:</span><span class="n">MaxFrameTime</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">Maximum</span> <span class="n">delay</span> <span class="kn">from</span> <span class="nn">frame</span> <span class="n">to</span> <span class="n">frame</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">EGU</span> <span class="n">sec</span>
    <span class="s1">&#39;}</span>
    <span class="n">fMaximumFrameTime</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="o">:=</span> <span class="mf">5.0</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Config</span><span class="p">:</span><span class="n">MinPixelChange</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">Minimum</span> <span class="n">px</span> <span class="n">change</span> <span class="n">to</span> <span class="n">be</span> <span class="n">considered</span> <span class="n">valid</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">EGU</span> <span class="n">px</span>
    <span class="s1">&#39;}</span>
    <span class="n">fMinPixelChange</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="o">:=</span> <span class="mf">0.05</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="o">@</span><span class="p">(</span><span class="n">BTPS</span><span class="p">):</span><span class="n">Config</span><span class="p">:</span><span class="n">SystemOverride</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">DESC</span> <span class="n">Full</span> <span class="n">system</span><span class="o">-</span><span class="n">level</span> <span class="n">override</span>
    <span class="s1">&#39;}</span>
    <span class="n">bSystemOverride</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

<span class="n">END_VAR</span>
</pre></div>
</div>
</section>
<section id="gvl-bts-vac">
<h2>GVL_BTS_VAC<a class="headerlink" href="#gvl-bts-vac" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">Valves</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">g_FFOut</span> <span class="p">:</span> <span class="n">FB_HardwareFFOutput</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_12]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_12</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_14</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_PP_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">vacuum</span> <span class="n">switchbox</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VVC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.q_xOPN_DO                     :=      TIIB[EL2004_02_05]^Channel 3^Output&#39;</span><span class="p">}</span>
    <span class="n">fb_PP_VVC</span> <span class="p">:</span> <span class="n">FB_VVC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Turbo</span> <span class="n">N2</span> <span class="n">purge</span>


    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VRC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1002_02_01]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1002_02_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_04</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_PP_VRC_1</span> <span class="p">:</span> <span class="n">FB_VRC</span><span class="p">;</span> <span class="o">//</span> <span class="n">O</span><span class="o">-</span><span class="n">ring</span> <span class="n">diff</span> <span class="n">pump</span> <span class="n">valve</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VRC:02 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.q_xOPN_DO                     :=      TIIB[EL2004_02_04]^Channel 3^Output&#39;</span><span class="p">}</span>
                                <span class="p">(</span><span class="o">*</span><span class="s1">&#39;.i_xOpnLS                        :=      TIIB[EL1002_02_02]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1002_02_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_04</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}           *)</span>
    <span class="n">fb_PP_VRC_2</span> <span class="p">:</span> <span class="n">FB_VVC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Foreline</span> <span class="n">valve</span> <span class="o">//</span><span class="n">valve</span> <span class="n">has</span> <span class="n">bad</span> <span class="n">readouts</span> <span class="n">so</span> <span class="n">using</span> <span class="n">VVC</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VRC:03 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1002_02_03]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1002_02_03</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_04</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_PP_VRC_3</span> <span class="p">:</span> <span class="n">FB_VRC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Slow</span> <span class="n">pump</span> <span class="n">valve</span>

    <span class="n">st_VP_VVC_1</span> <span class="p">:</span> <span class="n">ST_VVC</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VVC:02 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.q_xOPN_DO                     :=      TIIB[EL2004_02_05]^Channel 1^Output&#39;</span><span class="p">}</span>
    <span class="n">fb_VP_VVC_1</span> <span class="p">:</span> <span class="n">FB_VVC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Vent</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Switchbox</span>

    <span class="n">st_VP_VVC_2</span> <span class="p">:</span> <span class="n">ST_VVC</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:VVC:03 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.q_xOPN_DO                     :=      TIIB[EL2004_02_05]^Channel 2^Output&#39;</span><span class="p">}</span>
    <span class="n">fb_VP_VVC_2</span> <span class="p">:</span> <span class="n">FB_VVC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Vent</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Slow</span><span class="p">,</span> <span class="n">Switchbox</span>


    <span class="p">(</span><span class="o">*</span> <span class="n">Pumps</span> <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">LXLHN</span><span class="p">:</span><span class="n">PTM</span><span class="p">:</span><span class="mi">01</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">io</span>
    <span class="s1">&#39;}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xAtSpd                      :=      TIIB[EL1004_00_03]^Channel 3^Input;</span>
                                 <span class="o">.</span><span class="n">i_xRemote</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_03</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xFaultNC</span>                <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_03</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_RunDO</span>                   <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_00_04</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xRemote</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_00_04</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_PumpingStation</span>  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_00_04</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_PP_PTM</span> <span class="p">:</span> <span class="n">FB_PTM_Pfeiffer</span><span class="p">;</span> <span class="o">//</span> <span class="n">Turbo</span> <span class="n">pump</span>

    <span class="o">//</span> <span class="n">Serial</span> <span class="n">port</span>
    <span class="n">st_Pfeiffer_CTRL_PTM</span>            <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1..20</span><span class="p">]</span> <span class="n">OF</span> <span class="n">ST_PfeifferControl</span><span class="p">;</span>
    <span class="n">st_Pfeiffer_RBK_PTM</span>                     <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1..20</span><span class="p">]</span> <span class="n">OF</span> <span class="n">ST_PfeifferStatus</span><span class="p">;</span>
    <span class="n">PTM_COM</span>                                         <span class="p">:</span> <span class="n">FB_PFEIFFER_COM</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">LXLHN</span><span class="p">:</span><span class="n">PMF</span><span class="p">:</span><span class="mi">01</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">io</span>
    <span class="s1">&#39;}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xWarning            :=      TIIB[EL1004_00_01]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xAlarm</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xRemote</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xIsRun</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xRunDO</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xLspdDO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xResetDo</span>                <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_PP_PMF</span> <span class="p">:</span> <span class="n">FB_KashiyamaPump</span><span class="p">;</span> <span class="o">//</span> <span class="n">Roughing</span> <span class="n">Pump</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LXLHN:PIP:01&#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_08]^AI Standard Channel 3^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_PP_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">SW</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">Gauges</span> <span class="o">*</span><span class="p">)</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_10]^AI Standard Channel 3^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_PP_GPI_1</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Switchbox</span> <span class="n">pumpline</span> <span class="n">ATM</span> <span class="n">gauge</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:GPI:02 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_11]^AI Standard Channel 1^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_PP_GPI_2</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Foreline</span> <span class="n">gauge</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:GPI:03 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_10]^AI Standard Channel 2^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_DP_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Switchbox</span> <span class="n">gauge</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_09]^AI Standard Channel 2^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_01_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_PP_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Switchbox</span> <span class="n">pumpline</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LXLHN:GCC:02 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_09]^AI Standard Channel 4^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_01_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_DP_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Switchbox</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">Transport</span> <span class="n">Tubes</span> <span class="o">*</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">LS1</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS1:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_06]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LS1_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Input</span> <span class="n">LS1</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LS1:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_08]^AI Standard Channel 2^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LS1_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="nb">input</span> <span class="n">tube</span> <span class="n">LS1</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS1:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_10]^AI Standard Channel 4^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LS1_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Input</span> <span class="n">tube</span> <span class="n">LS1</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS1:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_10]^AI Standard Channel 4^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LS1_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Input</span> <span class="n">tube</span> <span class="n">LS1</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LS5</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS5:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_09]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_11</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LS5_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Input</span> <span class="n">LS5</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LS5:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_11]^AI Standard Channel 4^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_10</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LS5_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="nb">input</span> <span class="n">tube</span> <span class="n">LS5</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS5:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_13]^AI Standard Channel 1^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LS5_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Input</span> <span class="n">tube</span> <span class="n">LS5</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS5:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_11]^AI Standard Channel 1^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LS5_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Input</span> <span class="n">tube</span> <span class="n">LS5</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LS8</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS8:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_09]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_11</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LS8_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Input</span> <span class="n">LS8</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LS8:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_11]^AI Standard Channel 3^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_10</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LS8_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="nb">input</span> <span class="n">tube</span> <span class="n">LS8</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS8:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_13]^AI Standard Channel 2^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LS8_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Input</span> <span class="n">tube</span> <span class="n">LS8</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LS8:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_11]^AI Standard Channel 2^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LS8_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Input</span> <span class="n">tube</span> <span class="n">LS8</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD2</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD2:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_12]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_12</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_14</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD2_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD2</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD2:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_08]^AI Standard Channel 1^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD2_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD2</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD2:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_10]^AI Standard Channel 1^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD2_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD2</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD2:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_09]^AI Standard Channel 1^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_01_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD2_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD2</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD4</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD4:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_10]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_10</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_11</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD4_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD4</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD4:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_11]^AI Standard Channel 1^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_10</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD4_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD4</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD4:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_13]^AI Standard Channel 4^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD4_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD4</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD4:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_11]^AI Standard Channel 4^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD4_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD4</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD6</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD6:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_13]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_13</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_14</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD6_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD6</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD6:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_11]^AI Standard Channel 2^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_10</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD6_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD6</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD6:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_13]^AI Standard Channel 3^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD6_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD6</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD6:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_11]^AI Standard Channel 3^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_09</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_02</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD6_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD6</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD8</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD8:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_07]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD8_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD8</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD8:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_08]^AI Standard Channel 4^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD8_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD8</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD8:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_11]^AI Standard Channel 2^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD8_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD8</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD8:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_01_11]^AI Standard Channel 3^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_01_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_01_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD8_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD8</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD9</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD9:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_06]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD9_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD9</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD9:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_14]^AI Standard Channel 2^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_13</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_12</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD9_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD9</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD9:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_12]^AI Standard Channel 1^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD9_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD9</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD9:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_10]^AI Standard Channel 1^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_06</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD9_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD9</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD10</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD10:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_07]^Channel 2^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_08</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD10_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD10</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD10:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_14]^AI Standard Channel 1^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_13</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_12</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD10_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD10</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD10:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_12]^AI Standard Channel 2^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD10_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD10</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD10:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_10]^AI Standard Channel 2^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD10_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD10</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span> <span class="n">LD14</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD14:VGC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_xOpnLS                      :=      TIIB[EL1004_02_10]^Channel 4^Input;</span>
                                 <span class="o">.</span><span class="n">i_xClsLS</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_02_10</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xOPN_DO</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2004_02_11</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD14_VGC</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span> <span class="o">//</span> <span class="n">Gate</span> <span class="n">valve</span><span class="p">,</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD14</span> <span class="n">laser</span> <span class="n">Table</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>    <span class="o">:=</span>        <span class="s1">&#39; pv: LTLHN:LD14:PIP:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS                      :=      TIIB[EL3064_00_14]^AI Standard Channel 3^Value;</span>
                                 <span class="o">.</span><span class="n">i_xSP_DI</span>                  <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1004_00_13</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHVEna_DO</span>               <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2794_00_12</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="s1">&#39;}</span>
    <span class="n">fb_LD14_PIP</span> <span class="p">:</span> <span class="n">FB_PIP_Gamma</span><span class="p">;</span> <span class="o">//</span> <span class="n">Ion</span> <span class="n">Pump</span><span class="p">,</span> <span class="n">output</span> <span class="n">tube</span> <span class="n">LD14</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD14:GPI:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_12]^AI Standard Channel 3^Value &#39;</span><span class="p">}</span>
    <span class="n">fb_LD14_GPI</span> <span class="p">:</span> <span class="n">FB_MKS275</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD14</span> <span class="n">ATM</span> <span class="n">gauge</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span>        <span class="o">:=</span>    <span class="s1">&#39; pv: LTLHN:LD14:GCC:01 &#39;</span><span class="p">}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span>        <span class="s1">&#39;.i_iPRESS_R            :=      TIIB[EL3174_03_10]^AI Standard Channel 3^Value;</span>
                                 <span class="o">.</span><span class="n">i_xHV_ON</span>          <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">i_xDisc_Active</span>    <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL1124_03_07</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">q_xHV_DIS</span>                 <span class="o">:=</span>      <span class="n">TIIB</span><span class="p">[</span><span class="n">EL2624_03_01</span><span class="p">]</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span>     <span class="s1">&#39;}</span>
    <span class="n">fb_LD14_GCC</span> <span class="p">:</span> <span class="n">FB_MKS500</span><span class="p">;</span> <span class="o">//</span> <span class="n">Output</span> <span class="n">tube</span> <span class="n">LD14</span><span class="p">,</span> <span class="n">Cold</span> <span class="n">Cathode</span> <span class="n">gauge</span>

    <span class="o">//</span><span class="n">Preemptive</span> <span class="n">Arbiter</span> <span class="n">Content</span>
    <span class="n">g_fbArbiter</span>    <span class="p">:</span>   <span class="n">FB_Arbiter</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="n">END_VAR</span>
</pre></div>
</div>
</section>
<section id="gvl-com">
<h2>GVL_COM<a class="headerlink" href="#gvl-com" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span>
    <span class="o">//</span> <span class="n">Define</span> <span class="n">COM</span> <span class="n">Ports</span><span class="o">/</span><span class="n">Buffers</span> <span class="n">incl</span><span class="o">.</span> <span class="n">library</span> <span class="n">Tc2_SerialCom</span>

    <span class="o">//</span><span class="n">LXLHN_PTM_01</span>
    <span class="n">PTM_SerialRXBuffer</span> <span class="p">:</span> <span class="n">ComBuffer</span><span class="p">;</span>
    <span class="n">PTM_SerialTXBuffer</span> <span class="p">:</span> <span class="n">ComBuffer</span><span class="p">;</span>

    <span class="o">//</span> <span class="n">Serial</span> <span class="n">Terminal</span>
    <span class="n">PTM_fbSerialLineControl</span><span class="p">:</span> <span class="n">SerialLineControl</span><span class="p">;</span>

    <span class="o">//</span><span class="n">SERIAL</span> <span class="n">IO</span> <span class="o">//</span><span class="n">EL6021_00_05</span>
    <span class="p">{</span><span class="n">attribute</span>      <span class="s1">&#39;TcLinkTo&#39;</span>      <span class="o">:=</span>      <span class="s1">&#39;.Status:=TIIB[EL6021_00_05)]^COM TxPDO-Map Inputs^Status;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">0</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">1</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">2</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">3</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">4</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">5</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">6</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">7</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">8</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">9</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">10</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">11</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">12</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">13</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">14</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">15</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">16</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">17</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">18</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">18</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">19</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">19</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">20</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">TxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Inputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">In</span> <span class="mi">21</span><span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="n">PTM_stComIn</span>             <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span>  <span class="p">:</span>       <span class="n">EL6inData22B</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span>      <span class="s1">&#39;TcLinkTo&#39;</span>      <span class="o">:=</span>      <span class="s1">&#39;.Ctrl:=TIIB[EL6021_00_05]^COM RxPDO-Map Outputs^Ctrl;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">0</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">1</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">2</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">3</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">4</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">5</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">6</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">7</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">8</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">9</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">10</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">11</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">12</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">13</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">14</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">15</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">16</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">17</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">18</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">18</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">19</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">19</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">20</span><span class="p">;</span>
                                 <span class="o">.</span><span class="n">D</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span><span class="o">:=</span><span class="n">TIIB</span><span class="p">[</span><span class="n">EL6021_00_05</span><span class="p">]</span><span class="o">^</span><span class="n">COM</span> <span class="n">RxPDO</span><span class="o">-</span><span class="n">Map</span> <span class="n">Outputs</span><span class="o">^</span><span class="n">Data</span> <span class="n">Out</span> <span class="mi">21</span><span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="n">PTM_stComOut</span>            <span class="n">AT</span> <span class="o">%</span><span class="n">Q</span><span class="o">*</span>  <span class="p">:</span>       <span class="n">EL6outData22B</span><span class="p">;</span>

<span class="n">END_VAR</span>
</pre></div>
</div>
</section>
<section id="gvl-constants">
<h2>GVL_Constants<a class="headerlink" href="#gvl-constants" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VAR_GLOBAL</span> <span class="n">CONSTANT</span>
    <span class="n">ATM_PRESS</span> <span class="p">:</span> <span class="n">INT</span> <span class="o">:=</span> <span class="mi">760</span><span class="p">;</span> <span class="o">//</span> <span class="n">Atmospheric</span> <span class="n">pressure</span> <span class="ow">in</span> <span class="n">Torr</span>
    <span class="n">ATM_PRESS_ERR_RNG</span> <span class="p">:</span> <span class="n">INT</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">;</span> <span class="o">//</span> <span class="n">Error</span> <span class="nb">range</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">still</span> <span class="n">considered</span> <span class="n">atmospheric</span> <span class="n">pressure</span>

    <span class="n">EPICS_STRING_SIZE</span> <span class="p">:</span> <span class="n">INT</span> <span class="o">:=</span> <span class="mi">40</span><span class="p">;</span>
    <span class="n">PTM_INTERLOCK_SP</span> <span class="p">:</span> <span class="n">REAL</span> <span class="o">:=</span> <span class="mf">1E-2</span><span class="p">;</span>
<span class="n">END_VAR</span>
</pre></div>
</div>
</section>
<section id="gvl-shutters">
<h2>GVL_Shutters<a class="headerlink" href="#gvl-shutters" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="o">.</span><span class="n">bOpenRequest</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL2624_04_01</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bOpenStatus</span>        <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_02</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bCloseStatus</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_02</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bLssStatus</span>         <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_04</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: LTLHN:LS1:LST&#39;</span><span class="p">}</span>
    <span class="n">fbBay1</span> <span class="p">:</span> <span class="n">ST_ShutterControl</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="o">.</span><span class="n">bOpenRequest</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL2624_04_01</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bOpenStatus</span>        <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_02</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bCloseStatus</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_02</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bLssStatus</span>         <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_04</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: LTLHN:LS3:LST&#39;</span><span class="p">}</span>
    <span class="n">fbBay2</span> <span class="p">:</span> <span class="n">ST_ShutterControl</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="o">.</span><span class="n">bOpenRequest</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL2624_04_01</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bOpenStatus</span>        <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_03</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">1</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bCloseStatus</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_03</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">2</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bLssStatus</span>         <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_04</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: LTLHN:LS5:LST&#39;</span><span class="p">}</span>
    <span class="n">fbBay3</span> <span class="p">:</span> <span class="n">ST_ShutterControl</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;TcLinkTo&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="o">.</span><span class="n">bOpenRequest</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL2624_04_01</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Output</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bOpenStatus</span>        <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_03</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">3</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bCloseStatus</span>       <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_03</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
        <span class="o">.</span><span class="n">bLssStatus</span>         <span class="o">:=</span>      <span class="n">TIID</span><span class="o">^</span><span class="n">EtherCAT1</span><span class="o">^</span><span class="n">EK1100_04_00</span><span class="o">^</span><span class="n">EL1004_04_04</span><span class="o">^</span><span class="n">Channel</span> <span class="mi">4</span><span class="o">^</span><span class="n">Input</span><span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: LTLHN:LS8:LST&#39;</span><span class="p">}</span>
    <span class="n">fbBay4</span> <span class="p">:</span> <span class="n">ST_ShutterControl</span><span class="p">;</span>

<span class="n">END_VAR</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#st-shuttercontrol">ST_ShutterControl</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="gvl-variables">
<h2>GVL_Variables<a class="headerlink" href="#gvl-variables" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;qualified_only&#39;</span><span class="p">}</span>
<span class="n">VAR_GLOBAL</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
    <span class="n">pv</span><span class="p">:</span> <span class="n">LXLHN</span><span class="p">:</span><span class="n">VAC</span><span class="p">:</span><span class="n">OVRD_ON</span>
    <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Override</span> <span class="n">Off</span> <span class="p">;</span>
    <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Override</span> <span class="n">On</span> <span class="p">;</span>
    <span class="s1">&#39;}</span>
    <span class="n">xSystemOverrideMode_BTS</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span> <span class="p">(</span><span class="o">*</span> <span class="n">Global</span> <span class="n">system</span> <span class="n">override</span> <span class="k">for</span> <span class="n">the</span> <span class="n">BTS</span> <span class="n">Vacuum</span> <span class="n">System</span> <span class="o">*</span><span class="p">)</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: LXLHN:VAC:GCC:ENABLE&#39;</span><span class="p">}</span>
    <span class="n">xGCC_Enable_SW</span><span class="p">:</span> <span class="n">BOOL</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span> <span class="p">(</span><span class="o">*</span> <span class="n">Global</span> <span class="n">enable</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">GCCs</span> <span class="o">*</span><span class="p">)</span>
<span class="n">END_VAR</span>
</pre></div>
</div>
</section>
</section>
<section id="pous">
<h1>POUs<a class="headerlink" href="#pous" title="Permalink to this headline"></a></h1>
<section id="diagnostics">
<h2>DIAGNOSTICS<a class="headerlink" href="#diagnostics" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">DIAGNOSTICS</span>
<span class="n">VAR</span>
    <span class="o">//</span><span class="n">Change</span> <span class="n">the</span> <span class="n">PLC</span> <span class="n">String</span> <span class="n">Name</span> <span class="n">to</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">PLC</span> <span class="n">NAME</span>
    <span class="n">sPLCName</span> <span class="p">:</span><span class="n">STRING</span> <span class="o">:=</span> <span class="s1">&#39;PLC-LAS-BTS&#39;</span><span class="p">;</span>
    <span class="o">//</span><span class="n">Link</span> <span class="n">the</span> <span class="n">sAMSNetID</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Etherat</span> <span class="n">Master</span> <span class="n">netID</span>
    <span class="n">i_sAMSNetID</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span><span class="p">:</span> <span class="n">AMSNETID</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">DO</span> <span class="n">NOT</span> <span class="n">CHANGE</span>
    <span class="n">sAMSNetID</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">;</span> <span class="o">//</span><span class="n">used</span> <span class="k">for</span> <span class="n">EPICS</span> <span class="n">PV</span>
    <span class="n">sLibVersion_LCLS_General</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">;(</span><span class="o">*</span> <span class="o">:=</span> <span class="n">stLibVersion_LCLS_General</span><span class="o">.</span><span class="n">sVersion</span><span class="o">*</span><span class="p">)</span> <span class="p">;</span>

    <span class="n">fbEcatDiag</span><span class="p">:</span><span class="n">FB_EcatDiag</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39; pv:PLC:LAS:BTS:AllSlaveStateGood &#39;</span><span class="p">}</span>
    <span class="n">bAllSlaveStateGood</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39; pv:PLC:LAS:BTS:MasterStateGood &#39;</span><span class="p">}</span>
    <span class="n">bMasterStateGood</span> <span class="p">:</span><span class="n">BOOL</span><span class="p">;</span>
    <span class="n">iMasterState</span><span class="p">:</span> <span class="n">WORD</span><span class="p">;</span>
    <span class="n">sMasterState</span><span class="p">:</span><span class="n">STRING</span><span class="p">;</span>
    <span class="n">nSlaveNumber</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="n">aiSlaveStates</span><span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1..256</span><span class="p">]</span> <span class="n">OF</span> <span class="n">BYTE</span><span class="p">;</span>
    <span class="n">aEcSlaveInfo</span> <span class="p">:</span>  <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1..256</span><span class="p">]</span> <span class="n">OF</span> <span class="n">ST_EcDevice</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="o">//</span> <span class="n">Instaniating</span> <span class="n">a</span> <span class="n">call</span> <span class="n">to</span> <span class="n">the</span> <span class="n">fbEcatDiag</span>
<span class="n">fbEcatDiag</span><span class="p">(</span>
    <span class="n">I_AMSNetId</span><span class="o">:=</span><span class="n">i_sAMSNetID</span><span class="p">,</span>
    <span class="n">i_xFirstPass</span><span class="o">:=</span> <span class="n">_TaskInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">FirstCycle</span><span class="p">,</span>
    <span class="n">q_xAllSlaveStatesGood</span><span class="o">=&gt;</span> <span class="n">bAllSlaveStateGood</span><span class="p">,</span>
    <span class="n">q_anTermStates</span><span class="o">=&gt;</span> <span class="n">aiSlaveStates</span><span class="p">,</span>
    <span class="n">q_xMasterStateGood</span><span class="o">=&gt;</span><span class="n">bMasterStateGood</span><span class="p">,</span>
    <span class="n">q_nMasterState</span><span class="o">=&gt;</span> <span class="n">iMasterState</span><span class="p">,</span>
    <span class="n">q_sMasterState</span><span class="o">=&gt;</span> <span class="n">sMasterState</span><span class="p">,</span>
    <span class="n">q_astEcConfSlaveInfo</span><span class="o">=&gt;</span> <span class="n">aEcSlaveInfo</span><span class="p">,</span>
    <span class="n">q_nSlaves</span><span class="o">=&gt;</span> <span class="n">nSlaveNumber</span><span class="p">);</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
</section>
<section id="f-isvalveready">
<h2>F_IsValveReady<a class="headerlink" href="#f-isvalveready" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FUNCTION F_IsValveReady : BOOL
VAR_IN_OUT
    fbValve : FB_VGC;
END_VAR
VAR
END_VAR
F_IsValveReady := (
    fbValve.iq_stValve.eState = E_ValvePositionState.OPEN AND
    TRUE (*
        * Placeholder for something else?
        * TODO: Do we check eVGC_State for errors?
        * TODO: Do we care if the laser is used at atmosphere?
    *)
);

END_FUNCTION
</pre></div>
</div>
</section>
<section id="fb-destinationdatastore">
<h2>FB_DestinationDataStore<a class="headerlink" href="#fb-destinationdatastore" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">FB_DestinationDataStore</span>
<span class="n">VAR_INPUT</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: Name; io: input&#39;</span><span class="p">}</span>
    <span class="n">sName</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span>  <span class="n">Do</span> <span class="ow">not</span> <span class="n">pragma</span> <span class="n">valve</span><span class="p">;</span> <span class="n">Use</span> <span class="n">original</span> <span class="n">PVs</span> <span class="n">to</span> <span class="n">access</span> <span class="n">valve</span> <span class="n">state</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">fbDestinationValve</span> <span class="p">:</span> <span class="n">REFERENCE</span> <span class="n">TO</span> <span class="n">FB_VGC</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">ExitValveReady</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Not</span> <span class="n">ready</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Ready</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZSV</span> <span class="n">MAJOR</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">OSV</span> <span class="n">NO_ALARM</span>
    <span class="s1">&#39;}</span>
    <span class="n">bExitValveReady</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;pv: SRC&#39;</span><span class="p">}</span>
    <span class="n">stSourceDataStore</span> <span class="p">:</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nSources</span><span class="p">]</span> <span class="n">OF</span> <span class="n">ST_SourceDataStore</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
    <span class="o">//</span>
    <span class="n">bDataValid</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
    <span class="n">nIndex</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="n">stSource</span><span class="p">:</span> <span class="n">REFERENCE</span> <span class="n">TO</span> <span class="n">ST_SourceDataStore</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">bExitValveReady</span> <span class="o">:=</span> <span class="n">F_IsValveReady</span><span class="p">(</span><span class="n">fbDestinationValve</span><span class="p">);</span>

<span class="n">Update</span><span class="p">(</span>
    <span class="n">stDataSource</span><span class="o">:=</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;Source 1&#39;</span><span class="p">,</span>
    <span class="n">fbSourceValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LS1_VGC</span><span class="p">,</span>
    <span class="n">fbLinear</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1Linear</span><span class="p">,</span>
    <span class="n">fbRotary</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1Rotary</span><span class="p">,</span>
    <span class="n">fbGoniometer</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1Goniometer</span><span class="p">,</span>
    <span class="n">fbNearField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1NearFieldCamStats</span><span class="p">,</span>
    <span class="n">fbFarField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1FarFieldCamStats</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">Future</span> <span class="n">use</span><span class="p">:</span>
<span class="p">(</span><span class="o">*</span>
<span class="n">Update</span><span class="p">(</span>
    <span class="n">stDataSource</span><span class="o">:=</span><span class="n">stSourceDataStore2</span><span class="p">,</span>
    <span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;Source 2&#39;</span><span class="p">,</span>
    <span class="n">fbSourceValve</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay2SourceValve</span><span class="p">,</span>
    <span class="n">fbLinear</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay2Linear</span><span class="p">,</span>
    <span class="n">fbRotary</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay2Rotary</span><span class="p">,</span>
    <span class="n">fbGoniometer</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay2Goniometer</span><span class="p">,</span>
    <span class="n">fbNearField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay2NearFieldCamStats</span><span class="p">,</span>
    <span class="n">fbFarField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay2FarFieldCamStats</span>
<span class="p">);</span>
<span class="o">*</span><span class="p">)</span>

<span class="n">Update</span><span class="p">(</span>
    <span class="n">stDataSource</span><span class="o">:=</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
    <span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;Source 3&#39;</span><span class="p">,</span>
    <span class="n">fbSourceValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LS5_VGC</span><span class="p">,</span>  <span class="p">(</span><span class="o">*</span> <span class="n">This</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">typo</span><span class="p">;</span> <span class="n">LS5</span> <span class="ow">is</span> <span class="k">for</span> <span class="n">source</span> <span class="mi">3</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">fbLinear</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3Linear</span><span class="p">,</span>
    <span class="n">fbRotary</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3Rotary</span><span class="p">,</span>
    <span class="n">fbGoniometer</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3Goniometer</span><span class="p">,</span>
    <span class="n">fbNearField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3NearFieldCamStats</span><span class="p">,</span>
    <span class="n">fbFarField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3FarFieldCamStats</span>
<span class="p">);</span>

<span class="n">Update</span><span class="p">(</span>
    <span class="n">stDataSource</span><span class="o">:=</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
    <span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;Source 4&#39;</span><span class="p">,</span>
    <span class="n">fbSourceValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LS8_VGC</span><span class="p">,</span>  <span class="p">(</span><span class="o">*</span> <span class="n">Similarly</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">typo</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">fbLinear</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4Linear</span><span class="p">,</span>
    <span class="n">fbRotary</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4Rotary</span><span class="p">,</span>
    <span class="n">fbGoniometer</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4Goniometer</span><span class="p">,</span>
    <span class="n">fbNearField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4NearFieldCamStats</span><span class="p">,</span>
    <span class="n">fbFarField</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4FarFieldCamStats</span>
<span class="p">);</span>

<span class="n">END_FUNCTION_BLOCK</span>

<span class="n">METHOD</span> <span class="n">Update</span> <span class="p">:</span> <span class="n">BOOL</span>
<span class="n">VAR_INPUT</span>
    <span class="n">sName</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_IN_OUT</span>
    <span class="o">//</span> <span class="n">The</span> <span class="n">data</span> <span class="n">source</span> <span class="n">to</span> <span class="n">update</span>
    <span class="n">stDataSource</span> <span class="p">:</span> <span class="n">ST_SourceDataStore</span><span class="p">;</span>

    <span class="o">//</span> <span class="n">The</span> <span class="n">source</span> <span class="n">information</span>
    <span class="n">fbSourceValve</span> <span class="p">:</span> <span class="n">FB_VGC</span><span class="p">;</span>
    <span class="n">fbNearField</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>
    <span class="n">fbFarField</span> <span class="p">:</span> <span class="n">FB_EpicsStatsMonitor</span><span class="p">;</span>
    <span class="n">fbLinear</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="n">fbRotary</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
    <span class="n">fbGoniometer</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>

<span class="n">END_VAR</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">sName</span> <span class="o">:=</span> <span class="n">sName</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbSourceValve</span> <span class="n">REF</span><span class="o">=</span> <span class="n">fbSourceValve</span><span class="p">;</span>

<span class="n">stDataSource</span><span class="o">.</span><span class="n">bEntryValveReady</span> <span class="o">:=</span> <span class="n">F_IsValveReady</span><span class="p">(</span><span class="n">fbSourceValve</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Update</span> <span class="nb">range</span> <span class="n">comparisons</span> <span class="k">with</span> <span class="n">their</span> <span class="n">source</span> <span class="n">values</span> <span class="o">*</span><span class="p">)</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Cameras</span> <span class="o">*</span><span class="p">)</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidX</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbNearField</span><span class="o">.</span><span class="n">fCentroidX</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidX</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbNearField</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbNearField</span><span class="o">.</span><span class="n">bIsUpdating</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidY</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbNearField</span><span class="o">.</span><span class="n">fCentroidY</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidY</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbNearField</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbNearField</span><span class="o">.</span><span class="n">bIsUpdating</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidX</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbFarField</span><span class="o">.</span><span class="n">fCentroidX</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidX</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbFarField</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbFarField</span><span class="o">.</span><span class="n">bIsUpdating</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidY</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbFarField</span><span class="o">.</span><span class="n">fCentroidY</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidY</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbFarField</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbFarField</span><span class="o">.</span><span class="n">bIsUpdating</span><span class="p">;</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Motors</span> <span class="o">*</span><span class="p">)</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbLinear</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbLinear</span><span class="o">.</span><span class="n">fPosition</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbLinear</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbLinear</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbLinear</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span> <span class="p">(</span><span class="o">*</span> <span class="n">AND</span> <span class="n">fbLinear</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span> <span class="o">*</span><span class="p">);</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbRotary</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbRotary</span><span class="o">.</span><span class="n">fPosition</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbRotary</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbRotary</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbRotary</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span> <span class="p">(</span><span class="o">*</span> <span class="n">AND</span> <span class="n">fbRotary</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span> <span class="o">*</span><span class="p">);</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbGoniometer</span><span class="o">.</span><span class="n">fValue</span> <span class="o">:=</span> <span class="n">fbGoniometer</span><span class="o">.</span><span class="n">fPosition</span><span class="p">;</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbGoniometer</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">fbGoniometer</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span> <span class="n">fbGoniometer</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span> <span class="p">(</span><span class="o">*</span> <span class="n">AND</span> <span class="n">fbGoniometer</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span> <span class="o">*</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Run</span> <span class="n">the</span> <span class="nb">range</span> <span class="n">comparisons</span> <span class="o">*</span><span class="p">)</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidX</span><span class="p">();</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidY</span><span class="p">();</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidX</span><span class="p">();</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidY</span><span class="p">();</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbLinear</span><span class="p">();</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbRotary</span><span class="p">();</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">fbGoniometer</span><span class="p">();</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Data</span> <span class="ow">is</span> <span class="n">valid</span> <span class="n">overall</span> <span class="k">if</span> <span class="o">*</span><span class="nb">all</span><span class="o">*</span> <span class="nb">range</span> <span class="n">comparisons</span> <span class="n">say</span> <span class="n">so</span> <span class="o">*</span><span class="p">)</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">bDataValid</span> <span class="o">:=</span> <span class="p">(</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidX</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidY</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidX</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidY</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbLinear</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbRotary</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbGoniometer</span><span class="o">.</span><span class="n">bInputValid</span> <span class="n">AND</span>
    <span class="n">TRUE</span>
<span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Checks</span> <span class="n">only</span> <span class="k">pass</span> <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">valid</span> <span class="ow">and</span> <span class="nb">all</span> <span class="n">comparisons</span> <span class="n">are</span> <span class="n">true</span> <span class="o">*</span><span class="p">)</span>
<span class="n">stDataSource</span><span class="o">.</span><span class="n">bChecksOK</span> <span class="o">:=</span> <span class="p">(</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">bDataValid</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidX</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbNFCentroidY</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidX</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbFFCentroidY</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbLinear</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbRotary</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">fbGoniometer</span><span class="o">.</span><span class="n">bInRange</span> <span class="n">AND</span>
    <span class="n">stDataSource</span><span class="o">.</span><span class="n">bEntryValveReady</span> <span class="n">AND</span>
    <span class="n">bExitValveReady</span> <span class="n">AND</span>
    <span class="n">TRUE</span>
<span class="p">);</span>
<span class="n">END_METHOD</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-epicsmotormonitor">FB_EpicsMotorMonitor</a></p></li>
<li><p><a class="reference internal" href="#fb-epicsstatsmonitor">FB_EpicsStatsMonitor</a></p></li>
<li><p><a class="reference internal" href="#f-isvalveready">F_IsValveReady</a></p></li>
<li><p><a class="reference internal" href="#gvl-btps">GVL_BTPS</a></p></li>
<li><p><a class="reference internal" href="#gvl-btps-constants">GVL_BTPS_Constants</a></p></li>
<li><p><a class="reference internal" href="#gvl-bts-vac">GVL_BTS_VAC</a></p></li>
<li><p><a class="reference internal" href="#st-sourcedatastore">ST_SourceDataStore</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="fb-epicsmotormonitor">
<h2>FB_EpicsMotorMonitor<a class="headerlink" href="#fb-epicsmotormonitor" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">*</span>
    <span class="n">EPICS</span> <span class="n">Motor</span> <span class="n">Record</span> <span class="n">Monitoring</span> <span class="n">tool</span>

    <span class="n">Requires</span> <span class="n">a</span> <span class="s2">&quot;link&quot;</span> <span class="n">pragma</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">motor</span> <span class="n">record</span> <span class="n">prefix</span><span class="o">.</span>

<span class="o">*</span><span class="p">)</span>
<span class="n">FUNCTION_BLOCK</span> <span class="n">FB_EpicsMotorMonitor</span>
<span class="n">VAR_INPUT</span>
    <span class="n">bEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
    <span class="n">bIsMoving</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
    <span class="n">fPosition</span> <span class="p">:</span> <span class="n">LREAL</span><span class="p">;</span>
    <span class="n">nMSTA_Raw</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="n">stMSTA</span> <span class="p">:</span> <span class="n">ST_EpicsMotorMSTA</span><span class="p">;</span>
    <span class="n">bValid</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">RBV_</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">.</span><span class="n">RBV</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbRBVCheck</span> <span class="p">:</span> <span class="n">FB_LREALFromEPICS</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Dmov_</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">.</span><span class="n">DMOV</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbMovingCheck</span> <span class="p">:</span> <span class="n">FB_LREALFromEPICS</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Msta_</span>
        <span class="n">link</span><span class="p">:</span> <span class="o">.</span><span class="n">MSTA</span>
    <span class="s1">&#39;}</span>
    <span class="n">fbMotorStatusCheck</span> <span class="p">:</span> <span class="n">FB_LREALFromEPICS</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">IF</span> <span class="n">NOT</span> <span class="n">bEnable</span> <span class="n">THEN</span>
    <span class="n">bValid</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
    <span class="n">RETURN</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="n">fbRBVCheck</span><span class="p">();</span>
<span class="n">fbMovingCheck</span><span class="p">();</span>
<span class="n">fbMotorStatusCheck</span><span class="p">();</span>
<span class="n">bValid</span> <span class="o">:=</span> <span class="p">(</span>
    <span class="n">fbRBVCheck</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span>
    <span class="n">fbMovingCheck</span><span class="o">.</span><span class="n">bValid</span> <span class="n">AND</span>
    <span class="n">fbMotorStatusCheck</span><span class="o">.</span><span class="n">bValid</span>
<span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Moving</span> <span class="n">status</span> <span class="ow">is</span> <span class="n">DMOV</span><span class="p">;</span> <span class="n">this</span> <span class="n">comes</span> <span class="ow">in</span> <span class="k">as</span> <span class="n">a</span> <span class="n">floating</span> <span class="n">point</span> <span class="n">value</span>
     <span class="n">DMOV</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="n">moving</span>
     <span class="n">DMOV</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="n">done</span> <span class="n">moving</span><span class="p">,</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">moving</span>
<span class="o">*</span><span class="p">)</span>
<span class="n">bIsMoving</span> <span class="o">:=</span> <span class="n">ABS</span><span class="p">(</span><span class="n">fbMovingCheck</span><span class="o">.</span><span class="n">fValue</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-5</span><span class="p">;</span>
<span class="n">fPosition</span> <span class="o">:=</span> <span class="n">fbRBVCheck</span><span class="o">.</span><span class="n">fValue</span><span class="p">;</span>

<span class="n">nMSTA_Raw</span> <span class="o">:=</span> <span class="n">LREAL_TO_UINT</span><span class="p">(</span><span class="n">fbMotorStatusCheck</span><span class="o">.</span><span class="n">fValue</span><span class="p">);</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bPositiveDirection</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.0</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bDone</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.1</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bPlusLimitSwitch</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.2</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomeLimitSwitch</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.3</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bUnused0</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.4</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.5</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bSlipStall</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.6</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bHome</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.7</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bEncoderPresent</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.8</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bHardwareProblem</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.9</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bMoving</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.10</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bGainSupport</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.11</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bCommError</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.12</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bMinusLimitSwitch</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.13</span><span class="p">;</span>
<span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span> <span class="o">:=</span> <span class="n">nMSTA_Raw</span><span class="mf">.14</span><span class="p">;</span>

<span class="n">END_FUNCTION_BLOCK</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#st-epicsmotormsta">ST_EpicsMotorMSTA</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="fb-epicsstatsmonitor">
<h2>FB_EpicsStatsMonitor<a class="headerlink" href="#fb-epicsstatsmonitor" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(*
    EPICS AreaDetector Stats Plugin Monitor

    Requires a &quot;link&quot; pragma to specify the full plugin prefix.

*)
FUNCTION_BLOCK FB_EpicsStatsMonitor
VAR_INPUT
    fMaximumFrameTime : LREAL := 0.2;
    (* Minimum change in pixels to be considered a new frame, using pixel sum (total) as a metric *)
    fMinPixelSumChange : LREAL := 1E-6;
    bEnable : BOOL := TRUE;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: IsUpdating
        io: input
    &#39;}
    bIsUpdating : BOOL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: CentroidX
        io: input
    &#39;}
    fCentroidX : LREAL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: CentroidY
        io: input
    &#39;}
    fCentroidY : LREAL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: Total
        io: input
        field: DESC Sum of all elements in the image
    &#39;}
    fTotal : LREAL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: ArrayCount
        io: input
    &#39;}
    nArrayCount : UDINT;
    bValid : BOOL;
    {attribute &#39;pytmc&#39; := &#39;
        pv: FrameTime
        io: input
        field: DESC Avg time between frame updates
        field: EGU sec
    &#39;}
    fFrameTime : LREAL;
END_VAR
VAR
    (* The previous frame times, used for averaging *)
    fFrameTimes : ARRAY [1..nFrameArraySize] OF LREAL;
    bFrameTimeValid : ARRAY [1..nFrameArraySize] OF BOOL;
    nFrameIndex : UINT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CX_
        link: CentroidX_RBV
    &#39;}
    fbCentroidX : FB_LREALFromEPICS;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CY_
        link: CentroidY_RBV
    &#39;}
    fbCentroidY : FB_LREALFromEPICS;

    {attribute &#39;pytmc&#39; := &#39;
        pv: Total_
        link: Total_RBV
    &#39;}
    fbTotal : FB_LREALFromEPICS;

    fLastCentroidX : LREAL;
    fLastCentroidY : LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: Cnt_
        link: ArrayCounter_RBV
    &#39;}
    fbArrayCounter : FB_LREALFromEPICS;

    // Last array count value
    nLastArrayCount : UDINT;
    fLastTotal : LREAL;
    fInternalMaximumFrameTime : LREAL;
    nIdx : UINT;

    // Time of the last frame update
    tLastUpdate: TIME;
    tSinceLastFrame : TIME;
    tMaximumFrameTime : TIME;

    tonLastGoodFrame : TON;

    bInit : BOOL;
    // Did we see a frame update yet? (FALSE at startup; TRUE after first frame.)
    bSawFrame : BOOL;
    // Do we have a new frame? Has the array count updated, and position change above fNewFrameMinimumChange?
    {attribute &#39;pytmc&#39; := &#39;pv: HaveNewFrame; io: i&#39;}
    bHaveNewFrame : BOOL;
    // For this new frame, is it above the threshold fNewFrameMinimumChange?
    {attribute &#39;pytmc&#39; := &#39;pv: AboveThreshold; io: i&#39;}
    bAboveThreshold : BOOL;

    tCheckFrame : TON;

END_VAR
VAR CONSTANT
    nFrameArraySize : UINT := 10;
    fInvalidFrameTime : LREAL := 0.0;
END_VAR
IF NOT bEnable THEN
    bValid := FALSE;
    RETURN;
END_IF

IF NOT bInit THEN
    bInit := TRUE;
    fLastTotal := 0;
    bSawFrame := FALSE;
    tLastUpdate := TIME();
END_IF

fbCentroidX();
fbCentroidY();
fbTotal();
fbArrayCounter();

bValid := (
    fbTotal.bValid AND
    fbCentroidX.bValid AND
    fbCentroidY.bValid AND
    fbArrayCounter.bValid
);

fCentroidX := fbCentroidX.fValue;
fCentroidY := fbCentroidY.fValue;
fTotal := fbTotal.fValue;
nArrayCount := LREAL_TO_UDINT(fbArrayCounter.fValue);

tonLastGoodFrame.PT := T#60S;
tonLastGoodFrame(IN:=TRUE);

IF ABS(fTotal - fLastTotal) &gt;= fMinPixelSumChange AND fMinPixelSumChange &gt; 0.0 THEN

    fFrameTime := TIME_TO_LREAL(tonLastGoodFrame.ET) * 0.001; // ms to seconds

    tonLastGoodFrame(IN:=FALSE);
    tonLastGoodFrame(IN:=TRUE);
    bSawFrame := TRUE;

    fLastTotal := fTotal;
    fLastCentroidX := fCentroidX;
    fLastCentroidY := fCentroidY;
    nLastArrayCount := nArrayCount;

ELSIF TIME_TO_LREAL(tonLastGoodFrame.ET) * 0.001 &gt; fMaximumFrameTime THEN
    fFrameTime := TIME_TO_LREAL(tonLastGoodFrame.ET) * 0.001; // ms to seconds
END_IF

bIsUpdating := bSawFrame AND (fFrameTime &lt; fMaximumFrameTime);

END_FUNCTION_BLOCK
</pre></div>
</div>
</section>
<section id="fb-rangecomparison">
<h2>FB_RangeComparison<a class="headerlink" href="#fb-rangecomparison" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_RangeComparison
VAR_INPUT PERSISTENT
    (* The low part of the range. *)
    {attribute &#39;pytmc&#39; := &#39;pv: Low&#39;}
    fLow : LREAL;
    (* The high part of the range. *)
    {attribute &#39;pytmc&#39; := &#39;pv: High&#39;}
    fHigh : LREAL;
    (* Nominal value for this.  User-facing value. *)
    {attribute &#39;pytmc&#39; := &#39;
        pv: Nominal
        io: io
        field: DESC Nominal value for setting
    &#39;}
    fNominal : LREAL;
    (* Are the limits inclusive? *)
    {attribute &#39;pytmc&#39; := &#39;
        pv: Inclusive
        field: ZNAM Exclusive
        field: ONAM Inclusive
    &#39;}
    bInclusive : BOOL := TRUE;
END_VAR
VAR_INPUT
    (* The input value for comparison *)
    {attribute &#39;pytmc&#39; := &#39;pv: Value; io: input&#39;}
    fValue : LREAL;
    (* Should the input value be trusted? *)
    {attribute &#39;pytmc&#39; := &#39;
        pv: Valid
        io: input
        field: ZNAM Data Invalid
        field: ONAM Data Valid
        field: ZSV MAJOR
        field: OSV NO_ALARM
    &#39;}
    bInputValid : BOOL := FALSE;

END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: InRange
        io: input
        field: ZNAM Out of range
        field: ONAM In range
        field: ZSV MAJOR
        field: OSV NO_ALARM
    &#39;}
    bInRange : BOOL;
END_VAR
IF NOT bInputValid OR fHigh &lt; fLow THEN
    bInRange := FALSE;
ELSIF bInclusive THEN
    bInRange := (fValue &gt;= fLow) AND (fValue &lt;= fHigh);
ELSE
    bInRange := (fValue &gt; fLow) AND (fValue &lt; fHigh);
END_IF

END_FUNCTION_BLOCK
</pre></div>
</div>
</section>
<section id="fb-shuttersafety">
<h2>FB_ShutterSafety<a class="headerlink" href="#fb-shuttersafety" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">FB_ShutterSafety</span>
<span class="n">VAR_INPUT</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">LSSPermission</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">i</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">FALSE</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">TRUE</span>
    <span class="s1">&#39;}</span>
    <span class="n">bLSSPermission</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Acknowledge</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">io</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">FALSE</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">TRUE</span>
    <span class="s1">&#39;}</span>
    <span class="n">bAcknowledge</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">UserOpen</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">io</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Close</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Open</span>
    <span class="s1">&#39;}</span>
    <span class="n">bUserOpenRequest</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Override</span>
        <span class="n">io</span><span class="p">:</span> <span class="n">io</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Normal</span> <span class="n">mode</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Override</span> <span class="n">mode</span>
    <span class="s1">&#39;}</span>
    <span class="n">bOverride</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="n">nSourceIndex</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>

<span class="n">END_VAR</span>
<span class="n">VAR_IN_OUT</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">VAR_IN_OUT</span> <span class="o">-&gt;</span> <span class="n">reference</span> <span class="n">to</span> <span class="n">fbDestinations</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">fbDestinations</span> <span class="p">:</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nDestinations</span><span class="p">]</span> <span class="n">OF</span> <span class="n">FB_DestinationDataStore</span><span class="p">;</span>

<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Safe</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Unsafe</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Safe</span>
    <span class="s1">&#39;}</span>
    <span class="n">bSafeToOpen</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">Error</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">No</span> <span class="n">error</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Error</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZSV</span> <span class="n">NO_ALARM</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">OSV</span> <span class="n">MAJOR</span>
    <span class="s1">&#39;}</span>
    <span class="n">bLatchedError</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;pytmc&#39;</span> <span class="o">:=</span> <span class="s1">&#39;</span>
        <span class="n">pv</span><span class="p">:</span> <span class="n">LSS</span><span class="p">:</span><span class="n">OpenRequest</span>
        <span class="n">io</span><span class="p">:</span> <span class="nb">input</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ZNAM</span> <span class="n">Request</span> <span class="n">close</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">ONAM</span> <span class="n">Request</span> <span class="nb">open</span>
    <span class="s1">&#39;}</span>
    <span class="n">bOpenSignal</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

    <span class="p">(</span><span class="o">*</span> <span class="n">Rising</span> <span class="n">trigger</span> <span class="n">indicator</span> <span class="n">of</span> <span class="n">a</span> <span class="n">new</span> <span class="n">error</span> <span class="n">condition</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">rtError</span> <span class="p">:</span> <span class="n">R_TRIG</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">Rising</span> <span class="n">trigger</span> <span class="n">indicator</span> <span class="n">of</span> <span class="n">user</span> <span class="n">requesting</span> <span class="n">override</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">rtOverrideSet</span> <span class="p">:</span> <span class="n">R_TRIG</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span> <span class="n">Falling</span> <span class="n">trigger</span> <span class="k">for</span> <span class="n">a</span> <span class="s1">&#39;close shutter&#39;</span> <span class="n">request</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">ftCloseRequest</span> <span class="p">:</span> <span class="n">F_TRIG</span><span class="p">;</span>

<span class="n">END_VAR</span>
<span class="n">VAR</span>

    <span class="n">nDestIndex</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="n">bBtpsPermission</span> <span class="p">:</span> <span class="n">BOOL</span><span class="p">;</span>

<span class="n">END_VAR</span>
<span class="n">bLatchedError</span> <span class="n">R</span><span class="o">=</span> <span class="n">bAcknowledge</span><span class="p">;</span>
<span class="n">bAcknowledge</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>

<span class="n">IF</span> <span class="n">nSourceIndex</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="n">AND</span> <span class="n">nSourceIndex</span> <span class="o">&lt;=</span> <span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nSources</span> <span class="n">THEN</span>
    <span class="n">bBtpsPermission</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
    <span class="n">FOR</span> <span class="n">nDestIndex</span> <span class="o">:=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nDestinations</span> <span class="n">DO</span>
        <span class="n">bBtpsPermission</span> <span class="o">:=</span> <span class="p">(</span>
            <span class="n">bBtpsPermission</span> <span class="n">OR</span>
            <span class="n">fbDestinations</span><span class="p">[</span><span class="n">nDestIndex</span><span class="p">]</span><span class="o">.</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="n">nSourceIndex</span><span class="p">]</span><span class="o">.</span><span class="n">bChecksOK</span>
        <span class="p">);</span>
    <span class="n">END_FOR</span>
<span class="n">ELSE</span>
    <span class="n">bBtpsPermission</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
    <span class="n">bLatchedError</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Latch</span> <span class="n">an</span> <span class="n">error</span> <span class="k">if</span> <span class="n">we</span> <span class="n">have</span> <span class="n">no</span> <span class="n">permission</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
<span class="n">bLatchedError</span> <span class="n">S</span><span class="o">=</span> <span class="n">NOT</span> <span class="n">bBtpsPermission</span><span class="p">;</span>
<span class="n">rtError</span><span class="p">(</span><span class="n">CLK</span><span class="o">:=</span><span class="n">bLatchedError</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Reset</span> <span class="n">the</span> <span class="n">user</span> <span class="nb">open</span> <span class="n">request</span> <span class="n">on</span> <span class="n">a</span> <span class="n">new</span> <span class="n">error</span> <span class="p">(</span><span class="k">if</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">override</span> <span class="n">mode</span><span class="p">)</span> <span class="o">*</span><span class="p">)</span>
<span class="n">bUserOpenRequest</span> <span class="n">R</span><span class="o">=</span> <span class="n">rtError</span><span class="o">.</span><span class="n">Q</span> <span class="n">AND</span> <span class="n">NOT</span> <span class="n">bOverride</span><span class="p">;</span>

<span class="p">(</span><span class="o">*</span> <span class="n">If</span> <span class="n">the</span> <span class="n">user</span> <span class="n">requesets</span> <span class="n">a</span> <span class="n">shutter</span> <span class="n">close</span><span class="p">,</span> <span class="n">clear</span> <span class="n">override</span> <span class="n">mode</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
<span class="n">ftCloseRequest</span><span class="p">(</span><span class="n">CLK</span><span class="o">:=</span><span class="n">bUserOpenRequest</span><span class="p">);</span>
<span class="n">bOverride</span> <span class="n">R</span><span class="o">=</span> <span class="n">ftCloseRequest</span><span class="o">.</span><span class="n">Q</span><span class="p">;</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Don</span><span class="s1">&#39;t open immediately when in override mode.  Make the user request it. *)</span>
<span class="n">rtOverrideSet</span><span class="p">(</span><span class="n">CLK</span><span class="o">:=</span><span class="n">bOverride</span><span class="p">);</span>
<span class="n">bUserOpenRequest</span> <span class="n">R</span><span class="o">=</span> <span class="n">rtOverrideSet</span><span class="o">.</span><span class="n">Q</span> <span class="n">AND</span> <span class="n">NOT</span> <span class="n">bBtpsPermission</span><span class="p">;</span>

<span class="p">(</span><span class="o">*</span> <span class="n">LSS</span> <span class="n">permission</span> <span class="n">goes</span> <span class="n">low</span> <span class="o">-&gt;</span> <span class="n">stop</span> <span class="n">override</span> <span class="ow">and</span> <span class="n">reset</span> <span class="n">user</span> <span class="nb">open</span>

<span class="n">NOTE</span><span class="p">:</span> <span class="n">We</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">have</span> <span class="n">these</span> <span class="n">connected</span> <span class="n">yet</span><span class="p">,</span> <span class="n">so</span> <span class="n">we</span> <span class="n">can</span><span class="s1">&#39;t test this.</span>
<span class="n">TODO</span><span class="p">:</span> <span class="n">connect</span> <span class="n">bLssPermission</span>
<span class="n">TODO</span><span class="p">:</span> <span class="n">Double</span><span class="o">-</span><span class="n">check</span> <span class="n">logic</span>

    <span class="n">bOverride</span> <span class="n">R</span><span class="o">=</span> <span class="n">NOT</span> <span class="n">bLssPermission</span><span class="p">;</span>
    <span class="n">bUserOpenRequest</span> <span class="n">R</span><span class="o">=</span> <span class="n">NOT</span> <span class="n">bLssPermission</span><span class="p">;</span>
<span class="o">*</span><span class="p">)</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Lose</span> <span class="n">permission</span> <span class="n">on</span> <span class="n">a</span> <span class="n">latched</span> <span class="n">error</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
<span class="n">bBtpsPermission</span> <span class="n">R</span><span class="o">=</span> <span class="n">bLatchedError</span><span class="p">;</span>

<span class="p">(</span><span class="o">*</span> <span class="n">It</span><span class="s1">&#39;s safe to open IF in override mode (user says so!) or we determined it. *)</span>
<span class="n">bSafeToOpen</span> <span class="o">:=</span> <span class="n">bOverride</span> <span class="n">OR</span> <span class="n">bBtpsPermission</span><span class="p">;</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Only</span> <span class="nb">open</span> <span class="n">the</span> <span class="n">shutter</span> <span class="k">if</span> <span class="n">requested</span> <span class="ow">and</span> <span class="n">it</span><span class="s1">&#39;s safe. *)</span>
<span class="n">bOpenSignal</span> <span class="o">:=</span> <span class="n">bSafeToOpen</span> <span class="n">AND</span> <span class="n">bUserOpenRequest</span><span class="p">;</span>

<span class="n">END_FUNCTION_BLOCK</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-destinationdatastore">FB_DestinationDataStore</a></p></li>
<li><p><a class="reference internal" href="#gvl-btps-constants">GVL_BTPS_Constants</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="fb-test-epicscentroidmonitor">
<h2>FB_Test_EpicsCentroidMonitor<a class="headerlink" href="#fb-test-epicscentroidmonitor" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{attribute &#39;call_after_init&#39;}
FUNCTION_BLOCK FB_Test_EpicsCentroidMonitor EXTENDS TcUnit.FB_TestSuite
VAR_INPUT
END_VAR
VAR_OUTPUT
END_VAR
VAR
END_VAR
TestBasics();

END_FUNCTION_BLOCK

METHOD TestBasics
VAR_INPUT
END_VAR
VAR_INST
    fbMonitor : FB_EpicsStatsMonitor;
    nCount : INT := 0;
END_VAR
TEST(&#39;Updating_OK&#39;);

fbMonitor.nMaxDroppedFrames := 2;
fbMonitor.fMaximumFrameTime := 10.0;
fbMonitor.fMinPixelSumChange := 0.5;

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#0S, fX:=0.0, fY:=0.0, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#1S, fX:=0.1, fY:=0.1, fTotal:=1.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#2S, fX:=0.1, fY:=0.1, fTotal:=2.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

AssertTrue(fbMonitor.bIsUpdating, Message:=&#39;Centroid not reporting updating&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTime, 1.5, 1E-6, Message:=&#39;Update time inaccurate&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTimes[1], 1.0, 1E-6, Message:=&#39;Update time inaccurate&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTimes[2], 2.0, 1E-6, Message:=&#39;Update time inaccurate&#39;);

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#2S, fX:=0.1, fY:=0.1, fTotal:=3.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

AssertEquals_LREAL(fbMonitor.fFrameTimes[1], 2.0, 1E-6, Message:=&#39;Update time inaccurate&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTimes[2], 2.0, 1E-6, Message:=&#39;Update time inaccurate&#39;);

TEST_FINISHED();

(*
TEST(&#39;Updating_Not_OK&#39;);

fbMonitor.Initialize();

fbMonitor.nMaxDroppedFrames := 2;
fbMonitor.fMaximumFrameTime := 10.0;
fbMonitor.fMinPixelSumChange := 0.5;

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#0S, fX:=0.0, fY:=0.0, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#11S, fX:=0.1, fY:=0.1, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

WriteCentroidValue(fbMonitor:=fbMonitor, tLastUpdate:=T#11S, fX:=0.1, fY:=0.1, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0);
fbMonitor();

AssertFalse(fbMonitor.bIsUpdating, Message:=&#39;Centroid not updating&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTime, fbMonitor.fMaximumFrameTime, 1E-6, Message:=&#39;Update time inaccurate&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTimes[1], fbMonitor.fMaximumFrameTime, 1E-6, Message:=&#39;Update time inaccurate&#39;);
AssertEquals_LREAL(fbMonitor.fFrameTimes[2], fbMonitor.fMaximumFrameTime, 1E-6, Message:=&#39;Update time inaccurate&#39;);

TEST_FINISHED();

// TODO: how to make that timer trigger?
*)

TEST(&#39;Severity invalidation&#39;);

WriteCentroidValue(fbMonitor:=fbMonitor, fX:=0.0, fY:=0.0, fTotal:=0.0, nCount:=nCount, nX_Severity:=2, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0, tLastUpdate:=T#0.2S);
fbMonitor(fMinPixelSumChange:=0.0);
AssertFalse(fbMonitor.bValid, Message:=&#39;Invalid data - x severity&#39;);

WriteCentroidValue(fbMonitor:=fbMonitor, fX:=0.1, fY:=0.1, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=2, nCount_Severity:=0, nTotal_Severity:=0, tLastUpdate:=T#0.2S);
fbMonitor(fMinPixelSumChange:=0.0);
AssertFalse(fbMonitor.bValid, Message:=&#39;Invalid data - y severity&#39;);

WriteCentroidValue(fbMonitor:=fbMonitor, fX:=0.2, fY:=0.2, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=2, nTotal_Severity:=0, tLastUpdate:=T#0.2S);
fbMonitor(fMinPixelSumChange:=0.0);
AssertFalse(fbMonitor.bValid, Message:=&#39;Invalid data - count severity&#39;);

WriteCentroidValue(fbMonitor:=fbMonitor, fX:=0.2, fY:=0.2, fTotal:=0.0, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=2, tLastUpdate:=T#0.2S);
fbMonitor(fMinPixelSumChange:=0.0);
AssertFalse(fbMonitor.bValid, Message:=&#39;Invalid data - total severity&#39;);

WriteCentroidValue(fbMonitor:=fbMonitor, fX:=0.0, fY:=0.0, fTotal:=fbMonitor.fMinPixelSumChange, nCount:=nCount, nX_Severity:=0, nY_Severity:=0, nCount_Severity:=0, nTotal_Severity:=0, tLastUpdate:=T#0.1S);
fbMonitor(fMinPixelSumChange:=0.0);
AssertTrue(fbMonitor.bValid, Message:=&#39;Data valid&#39;);
AssertTrue(fbMonitor.bIsUpdating, Message:=&#39;Data valid and updating&#39;);

TEST_FINISHED();
END_METHOD

METHOD WriteCentroidValue
VAR_IN_OUT
    fbMonitor : FB_EpicsStatsMonitor;
END_VAR
VAR_INPUT
    fX : LREAL;
    fY : LREAL;
    fTotal : LREAL;
    nCount : INT;
    nX_Severity : INT := 0;
    nY_Severity : INT := 0;
    nCount_Severity : INT := 0;
    nTotal_Severity : INT := 0;
    tLastUpdate : TIME;
END_VAR
WRITE_PROTECTED_INT(ADR(fbMonitor.fbCentroidX.iPLCInternalSeverity), nX_Severity);
WRITE_PROTECTED_INT(ADR(fbMonitor.fbCentroidY.iPLCInternalSeverity), nY_Severity);
WRITE_PROTECTED_INT(ADR(fbMonitor.fbArrayCounter.iPLCInternalSeverity), nCount_Severity);
WRITE_PROTECTED_INT(ADR(fbMonitor.fbTotal.iPLCInternalSeverity), nTotal_Severity);

WRITE_PROTECTED_LREAL(ADR(fbMonitor.fbCentroidX.fPLCInternalValue), fX);
WRITE_PROTECTED_LREAL(ADR(fbMonitor.fbCentroidY.fPLCInternalValue), fY);
WRITE_PROTECTED_LREAL(ADR(fbMonitor.fbTotal.fPLCInternalValue), fTotal);
WRITE_PROTECTED_LREAL(ADR(fbMonitor.fbArrayCounter.fPLCInternalValue), INT_TO_LREAL(nCount));

WRITE_PROTECTED_TIME(ADR(fbMonitor.tLastUpdate), TIME() - tLastUpdate);
END_METHOD
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-epicsstatsmonitor">FB_EpicsStatsMonitor</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="fb-test-epicsmotormonitor">
<h2>FB_Test_EpicsMotorMonitor<a class="headerlink" href="#fb-test-epicsmotormonitor" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;call_after_init&#39;</span><span class="p">}</span>
<span class="n">FUNCTION_BLOCK</span> <span class="n">FB_Test_EpicsMotorMonitor</span> <span class="n">EXTENDS</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_TestSuite</span>
<span class="n">VAR_INPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="n">TestBasics</span><span class="p">();</span>

<span class="n">END_FUNCTION_BLOCK</span>

<span class="n">METHOD</span> <span class="n">TestBasics</span>
<span class="n">VAR_INPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR_INST</span>
    <span class="n">fbMonitor</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Basic&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bValid</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Data valid&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>


<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Severities&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bValid</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Invalid RBV&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bValid</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Invalid status&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">2</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bValid</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Invalid moving&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bValid</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;All valid&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Moving&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span> <span class="p">(</span><span class="o">*</span> <span class="n">DMOV</span> <span class="o">*</span><span class="p">),</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bIsMoving</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Moving&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">1</span> <span class="p">(</span><span class="o">*</span> <span class="n">DMOV</span> <span class="o">*</span><span class="p">),</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">bIsMoving</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not moving&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Position&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertEquals_LREAL</span><span class="p">(</span><span class="n">Actual</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fPosition</span><span class="p">,</span> <span class="n">Expected</span><span class="o">:=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">Delta</span><span class="o">:=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Position 1 OK&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nRBV_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nMoving_Severity</span><span class="o">:=</span><span class="mi">0</span><span class="p">);</span>
<span class="n">fbMonitor</span><span class="p">();</span>
<span class="n">AssertEquals_LREAL</span><span class="p">(</span><span class="n">Actual</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fPosition</span><span class="p">,</span> <span class="n">Expected</span><span class="o">:=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">Delta</span><span class="o">:=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Position 2 OK&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;MSTA set&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">16</span><span class="c1">#0FFFF, nRBV_Severity:=0, nStatus_Severity:=0, nMoving_Severity:=0);</span>
<span class="n">fbMonitor</span><span class="p">();</span>

<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bPositiveDirection</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bPositiveDirection True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bDone</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bDone True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bPlusLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bPlusLimitSwitch True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomeLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHomeLimitSwitch True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bUnused0</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bUnused0 True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bClosedLoop True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bSlipStall</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bSlipStall True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHome</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHome True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bEncoderPresent</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bEncoderPresent True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHardwareProblem</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHardwareProblem True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bMoving</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bMoving True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bGainSupport</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bGainSupport True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bCommError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bCommError True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bMinusLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bMinusLimitSwitch True&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHomed True&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>


<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;MSTA zero&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">16</span><span class="c1">#0000, nRBV_Severity:=0, nStatus_Severity:=0, nMoving_Severity:=0);</span>
<span class="n">fbMonitor</span><span class="p">();</span>

<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bPositiveDirection</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bPositiveDirection False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bDone</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bDone False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bPlusLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bPlusLimitSwitch False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomeLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHomeLimitSwitch False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bUnused0</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bUnused0 False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bClosedLoop False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bSlipStall</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bSlipStall False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHome</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHome False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bEncoderPresent</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bEncoderPresent False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHardwareProblem</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHardwareProblem False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bMoving</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bMoving False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bGainSupport</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bGainSupport False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bCommError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bCommError False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bMinusLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bMinusLimitSwitch False&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHomed False&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>


<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;MSTA something&#39;</span><span class="p">);</span>

<span class="n">WriteData</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">:=</span><span class="n">fbMonitor</span><span class="p">,</span> <span class="n">fRBV</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nMoving</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nStatus</span><span class="o">:=</span><span class="mi">2</span><span class="c1">#0100_0011_0000_0110, nRBV_Severity:=0, nStatus_Severity:=0, nMoving_Severity:=0);</span>
<span class="n">fbMonitor</span><span class="p">();</span>

<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bPositiveDirection</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bPositiveDirection&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bDone</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bDone&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bPlusLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bPlusLimitSwitch&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomeLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHomeLimitSwitch&#39;</span><span class="p">);</span>

<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bUnused0</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bUnused0&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bClosedLoop</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bClosedLoop&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bSlipStall</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bSlipStall&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHome</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHome&#39;</span><span class="p">);</span>

<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bEncoderPresent</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bEncoderPresent&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHardwareProblem</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHardwareProblem&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bMoving</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bMoving&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bGainSupport</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bGainSupport&#39;</span><span class="p">);</span>

<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bCommError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bCommError&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bMinusLimitSwitch</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bMinusLimitSwitch&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">stMSTA</span><span class="o">.</span><span class="n">bHomed</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;bHomed&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>
<span class="n">END_METHOD</span>

<span class="n">METHOD</span> <span class="n">WriteData</span>
<span class="n">VAR_IN_OUT</span>
    <span class="n">fbMonitor</span> <span class="p">:</span> <span class="n">FB_EpicsMotorMonitor</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_INPUT</span>
    <span class="n">fRBV</span> <span class="p">:</span> <span class="n">LREAL</span><span class="p">;</span>
    <span class="n">nMoving</span> <span class="p">:</span> <span class="n">INT</span><span class="p">;</span>
    <span class="n">nStatus</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="n">nRBV_Severity</span> <span class="p">:</span> <span class="n">INT</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">nStatus_Severity</span> <span class="p">:</span> <span class="n">INT</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">nMoving_Severity</span> <span class="p">:</span> <span class="n">INT</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">WRITE_PROTECTED_INT</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fbRBVCheck</span><span class="o">.</span><span class="n">iPLCInternalSeverity</span><span class="p">),</span> <span class="n">nRBV_Severity</span><span class="p">);</span>
<span class="n">WRITE_PROTECTED_INT</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fbMotorStatusCheck</span><span class="o">.</span><span class="n">iPLCInternalSeverity</span><span class="p">),</span> <span class="n">nStatus_Severity</span><span class="p">);</span>
<span class="n">WRITE_PROTECTED_INT</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fbMovingCheck</span><span class="o">.</span><span class="n">iPLCInternalSeverity</span><span class="p">),</span> <span class="n">nMoving_Severity</span><span class="p">);</span>

<span class="n">WRITE_PROTECTED_LREAL</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fbRBVCheck</span><span class="o">.</span><span class="n">fPLCInternalValue</span><span class="p">),</span> <span class="n">fRBV</span><span class="p">);</span>
<span class="n">WRITE_PROTECTED_LREAL</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fbMotorStatusCheck</span><span class="o">.</span><span class="n">fPLCInternalValue</span><span class="p">),</span> <span class="n">UINT_TO_LREAL</span><span class="p">(</span><span class="n">nStatus</span><span class="p">));</span>
<span class="n">WRITE_PROTECTED_LREAL</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbMonitor</span><span class="o">.</span><span class="n">fbMovingCheck</span><span class="o">.</span><span class="n">fPLCInternalValue</span><span class="p">),</span> <span class="n">INT_TO_LREAL</span><span class="p">(</span><span class="n">nMoving</span><span class="p">));</span>
<span class="n">END_METHOD</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-epicsmotormonitor">FB_EpicsMotorMonitor</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="fb-testrangecomparison">
<h2>FB_TestRangeComparison<a class="headerlink" href="#fb-testrangecomparison" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">attribute</span> <span class="s1">&#39;call_after_init&#39;</span><span class="p">}</span>
<span class="n">FUNCTION_BLOCK</span> <span class="n">FB_TestRangeComparison</span> <span class="n">EXTENDS</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_TestSuite</span>
<span class="n">VAR_INPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
    <span class="n">fbRange</span> <span class="p">:</span> <span class="n">FB_RangeComparison</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Inclusive valid data&#39;</span><span class="p">);</span>

<span class="n">fbRange</span><span class="o">.</span><span class="n">fLow</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fHigh</span> <span class="o">:=</span> <span class="mf">10.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fNominal</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInclusive</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;lower bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">10.0</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;upper bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">5.0</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;mid range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=-</span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;below range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">11.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;above range&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Exclusive valid data&#39;</span><span class="p">);</span>

<span class="n">fbRange</span><span class="o">.</span><span class="n">fLow</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fHigh</span> <span class="o">:=</span> <span class="mf">10.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fNominal</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInclusive</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;lower bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">10.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;upper bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">5.0</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;mid range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=-</span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;below range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">11.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;above range&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Invalid data&#39;</span><span class="p">);</span>

<span class="n">fbRange</span><span class="o">.</span><span class="n">fLow</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fHigh</span> <span class="o">:=</span> <span class="mf">10.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fNominal</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInclusive</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>

<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;lower bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">10.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;upper bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">5.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;mid range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=-</span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;below range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">11.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;above range&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>


<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Bad range&#39;</span><span class="p">);</span>

<span class="n">fbRange</span><span class="o">.</span><span class="n">fLow</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fHigh</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">fNominal</span> <span class="o">:=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInclusive</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">fbRange</span><span class="o">.</span><span class="n">bInputValid</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>

<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;lower bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">10.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;upper bound&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">5.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;mid range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=-</span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;below range&#39;</span><span class="p">);</span>
<span class="n">fbRange</span><span class="p">(</span><span class="n">fValue</span><span class="o">:=</span><span class="mf">11.0</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbRange</span><span class="o">.</span><span class="n">bInRange</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;above range&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">END_FUNCTION_BLOCK</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-rangecomparison">FB_RangeComparison</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="fb-testshuttersafety">
<h2>FB_TestShutterSafety<a class="headerlink" href="#fb-testshuttersafety" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">FB_TestShutterSafety</span> <span class="n">EXTENDS</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_TestSuite</span>
<span class="n">VAR_INPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
    <span class="n">fbShutter</span> <span class="p">:</span> <span class="n">FB_ShutterSafety</span><span class="p">;</span>
    <span class="n">fbDestinations</span> <span class="p">:</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nDestinations</span><span class="p">]</span> <span class="n">OF</span> <span class="n">FB_DestinationDataStore</span><span class="p">;</span>
    <span class="n">nDest</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="n">nSource</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Bad source index&#39;</span><span class="p">);</span>

<span class="n">Reset</span><span class="p">();</span>

<span class="n">fbShutter</span><span class="o">.</span><span class="n">bAcknowledge</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bUserOpenRequest</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bOverride</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">nSourceIndex</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Bad source index&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Safe to open&#39;</span><span class="p">);</span>

<span class="n">Reset</span><span class="p">();</span>

<span class="n">fbDestinations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bChecksOK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">fbShutter</span><span class="o">.</span><span class="n">bAcknowledge</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bOverride</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">FALSE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 1&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 1; close&#39;</span><span class="p">);</span>
<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 1&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 1; open&#39;</span><span class="p">);</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not safe for source 2&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not safe for source 2; close&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>



<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Acknowledge error&#39;</span><span class="p">);</span>

<span class="n">Reset</span><span class="p">();</span>

<span class="n">fbDestinations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bChecksOK</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">,</span> <span class="n">bAcknowledge</span><span class="o">:=</span><span class="kc">False</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not safe yet&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not safe yet; close&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bUserOpenRequest</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Reset open request on fail&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error&#39;</span><span class="p">);</span>

<span class="n">fbDestinations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bChecksOK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">,</span> <span class="n">bAcknowledge</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Open not yet requested&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error cleared&#39;</span><span class="p">);</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">,</span> <span class="n">bAcknowledge</span><span class="o">:=</span><span class="n">FALSE</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2; open&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error cleared&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>



<span class="n">TEST</span><span class="p">(</span><span class="s1">&#39;Override error&#39;</span><span class="p">);</span>

<span class="n">Reset</span><span class="p">();</span>

<span class="n">fbDestinations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bChecksOK</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">,</span> <span class="n">bAcknowledge</span><span class="o">:=</span><span class="kc">False</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not safe yet&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Not safe yet; close&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bUserOpenRequest</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Reset open request on fail&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error&#39;</span><span class="p">);</span>

<span class="n">fbShutter</span><span class="o">.</span><span class="n">bOverride</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Open not yet requested&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error overridden not cleared&#39;</span><span class="p">);</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2; open&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error still there&#39;</span><span class="p">);</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bUserOpenRequest</span><span class="o">:=</span><span class="n">FALSE</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2&#39;</span><span class="p">);</span>
<span class="n">AssertTrue</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Safe for source 2; open&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Latched error still there&#39;</span><span class="p">);</span>
<span class="n">AssertFalse</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOverride</span><span class="p">,</span> <span class="n">Message</span><span class="o">:=</span><span class="s1">&#39;Override set after shutter closure&#39;</span><span class="p">);</span>

<span class="n">TEST_FINISHED</span><span class="p">();</span>

<span class="n">END_FUNCTION_BLOCK</span>

<span class="n">ACTION</span> <span class="n">Reset</span><span class="p">:</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bAcknowledge</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bUserOpenRequest</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bOverride</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">nSourceIndex</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>

<span class="n">fbShutter</span><span class="o">.</span><span class="n">bAcknowledge</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bUserOpenRequest</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">bOverride</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">fbShutter</span><span class="o">.</span><span class="n">nSourceIndex</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">fbShutter</span><span class="p">(</span><span class="n">fbDestinations</span><span class="o">:=</span><span class="n">fbDestinations</span><span class="p">);</span>

<span class="n">FOR</span> <span class="n">nDest</span> <span class="o">:=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="n">GVL_BTPS_Constants</span><span class="o">.</span><span class="n">nDestinations</span> <span class="n">DO</span>
    <span class="n">fbDestinations</span><span class="p">[</span><span class="n">nDest</span><span class="p">]</span><span class="o">.</span><span class="n">stSourceDataStore</span><span class="p">[</span><span class="n">nSource</span><span class="p">]</span><span class="o">.</span><span class="n">bChecksOK</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">END_FOR</span>

<span class="n">WRITE_PROTECTED_BOOL</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bLatchedError</span><span class="p">),</span> <span class="n">FALSE</span><span class="p">);</span>
<span class="n">WRITE_PROTECTED_BOOL</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">),</span> <span class="n">FALSE</span><span class="p">);</span>
<span class="n">WRITE_PROTECTED_BOOL</span><span class="p">(</span><span class="n">ADR</span><span class="p">(</span><span class="n">fbShutter</span><span class="o">.</span><span class="n">bSafeToOpen</span><span class="p">),</span> <span class="n">FALSE</span><span class="p">);</span>
<span class="n">END_ACTION</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-destinationdatastore">FB_DestinationDataStore</a></p></li>
<li><p><a class="reference internal" href="#fb-shuttersafety">FB_ShutterSafety</a></p></li>
<li><p><a class="reference internal" href="#gvl-btps-constants">GVL_BTPS_Constants</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="main">
<h2>MAIN<a class="headerlink" href="#main" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">MAIN</span>
<span class="n">VAR</span>
    <span class="n">fbLogHandler</span> <span class="p">:</span> <span class="n">FB_LogHandler</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">fbLogHandler</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Run</span> <span class="n">the</span> <span class="n">Diagnostics</span> <span class="n">PRG</span>
<span class="n">DIAGNOSTICS</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Run</span> <span class="n">the</span> <span class="n">Gauges</span> <span class="n">PRG</span>
<span class="n">PRG_GAUGES</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Run</span> <span class="n">the</span> <span class="n">Valves</span> <span class="n">PRG</span>
<span class="n">PRG_VALVES</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Run</span> <span class="n">the</span> <span class="n">Pumps</span> <span class="n">PRG</span>
<span class="n">PRG_PUMPS</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Run</span> <span class="n">the</span> <span class="n">beam</span> <span class="n">transport</span> <span class="n">protection</span> <span class="n">system</span> <span class="n">code</span> <span class="p">(</span><span class="n">BTPS</span><span class="p">)</span>
<span class="n">PRG_BTPS</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Uncomment</span> <span class="n">me</span> <span class="n">to</span> <span class="n">run</span> <span class="n">tests</span>
<span class="p">(</span><span class="o">*</span> <span class="n">PRG_RunTests</span><span class="p">();</span> <span class="o">*</span><span class="p">)</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#diagnostics">DIAGNOSTICS</a></p></li>
<li><p><a class="reference internal" href="#prg-btps">PRG_BTPS</a></p></li>
<li><p><a class="reference internal" href="#prg-gauges">PRG_GAUGES</a></p></li>
<li><p><a class="reference internal" href="#prg-pumps">PRG_PUMPS</a></p></li>
<li><p><a class="reference internal" href="#prg-runtests">PRG_RunTests</a></p></li>
<li><p><a class="reference internal" href="#prg-valves">PRG_VALVES</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="prg-btps">
<h2>PRG_BTPS<a class="headerlink" href="#prg-btps" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">PRG_BTPS</span>
<span class="n">VAR</span>

<span class="n">END_VAR</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1Linear</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3Linear</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4Linear</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>

<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1Rotary</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3Rotary</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4Rotary</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>

<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1Goniometer</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3Goniometer</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4Goniometer</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">);</span>

<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1NearFieldCamStats</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fMaximumFrameTime</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMaximumFrameTime</span><span class="p">,</span> <span class="n">fMinPixelSumChange</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMinPixelChange</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3NearFieldCamStats</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fMaximumFrameTime</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMaximumFrameTime</span><span class="p">,</span> <span class="n">fMinPixelSumChange</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMinPixelChange</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4NearFieldCamStats</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fMaximumFrameTime</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMaximumFrameTime</span><span class="p">,</span> <span class="n">fMinPixelSumChange</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMinPixelChange</span><span class="p">);</span>

<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay1FarFieldCamStats</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fMaximumFrameTime</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMaximumFrameTime</span><span class="p">,</span> <span class="n">fMinPixelSumChange</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMinPixelChange</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay3FarFieldCamStats</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fMaximumFrameTime</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMaximumFrameTime</span><span class="p">,</span> <span class="n">fMinPixelSumChange</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMinPixelChange</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbBay4FarFieldCamStats</span><span class="p">(</span><span class="n">bEnable</span><span class="o">:=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">fMaximumFrameTime</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMaximumFrameTime</span><span class="p">,</span> <span class="n">fMinPixelSumChange</span><span class="o">:=</span><span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">fMinPixelChange</span><span class="p">);</span>

<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;TMO IP1&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD8_VGC</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">2</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;TMO IP2&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD10_VGC</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">3</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;TMO IP3&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD2_VGC</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">4</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;RIX qRIXS&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD6_VGC</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">5</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;RIX ChemRIXS&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD4_VGC</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">6</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;XPP&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD14_VGC</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">[</span><span class="mi">7</span><span class="p">](</span><span class="n">sName</span><span class="o">:=</span><span class="s1">&#39;Laser Lab&#39;</span><span class="p">,</span> <span class="n">fbDestinationValve</span><span class="o">:=</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD9_VGC</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Shutter</span> <span class="n">safety</span> <span class="n">evaluation</span> <span class="n">should</span> <span class="n">always</span> <span class="n">come</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span><span class="o">.</span> <span class="o">*</span><span class="p">)</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety1</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="o">//</span> <span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety2</span><span class="p">(</span><span class="n">nIndex</span><span class="o">:=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety3</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">);</span>
<span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety4</span><span class="p">(</span><span class="n">nSourceIndex</span><span class="o">:=</span><span class="mi">4</span><span class="p">,</span> <span class="n">fbDestinations</span><span class="o">:=</span><span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbDestinations</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">shutter</span> <span class="n">safety</span> <span class="n">result</span><span class="p">;</span> <span class="n">send</span> <span class="nb">open</span> <span class="ow">or</span> <span class="n">close</span> <span class="n">request</span> <span class="n">to</span> <span class="n">shutters</span> <span class="o">*</span><span class="p">)</span>
<span class="n">IF</span> <span class="n">NOT</span> <span class="n">GVL_BTPS_Retain</span><span class="o">.</span><span class="n">bSystemOverride</span> <span class="n">THEN</span>
    <span class="n">GVL_Shutters</span><span class="o">.</span><span class="n">fbBay1</span><span class="o">.</span><span class="n">bOpenRequest</span> <span class="o">:=</span> <span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety1</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">GVL_Shutters</span><span class="o">.</span><span class="n">fbBay2</span><span class="o">.</span><span class="n">bOpenRequest</span> <span class="o">:=</span> <span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety2</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">;</span>
    <span class="n">GVL_Shutters</span><span class="o">.</span><span class="n">fbBay3</span><span class="o">.</span><span class="n">bOpenRequest</span> <span class="o">:=</span> <span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety3</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">;</span>
    <span class="n">GVL_Shutters</span><span class="o">.</span><span class="n">fbBay4</span><span class="o">.</span><span class="n">bOpenRequest</span> <span class="o">:=</span> <span class="n">GVL_BTPS</span><span class="o">.</span><span class="n">fbShutterSafety4</span><span class="o">.</span><span class="n">bOpenSignal</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Periodically</span> <span class="n">save</span> <span class="n">persistent</span> <span class="n">variables</span> <span class="k">with</span> <span class="n">source</span><span class="o">/</span><span class="n">destination</span> <span class="n">store</span> <span class="n">information</span> <span class="o">*</span><span class="p">)</span>
<span class="n">PRG_SavePeristentVariables</span><span class="p">();</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#gvl-btps">GVL_BTPS</a></p></li>
<li><p><a class="reference internal" href="#gvl-btps-retain">GVL_BTPS_Retain</a></p></li>
<li><p><a class="reference internal" href="#gvl-bts-vac">GVL_BTS_VAC</a></p></li>
<li><p><a class="reference internal" href="#gvl-shutters">GVL_Shutters</a></p></li>
<li><p><a class="reference internal" href="#prg-saveperistentvariables">PRG_SavePeristentVariables</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="prg-com">
<h2>PRG_COM<a class="headerlink" href="#prg-com" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">PRG_COM</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="o">//</span><span class="n">needs</span> <span class="n">to</span> <span class="n">run</span> <span class="n">on</span> <span class="n">a</span> <span class="n">seperate</span> <span class="n">task</span>

<span class="p">(</span><span class="o">*</span><span class="n">Instanitate</span> <span class="n">Serial</span> <span class="n">port</span> <span class="n">com</span> <span class="n">function</span> <span class="o">*</span><span class="p">)</span>
<span class="o">//</span><span class="n">LXLHN_PTM_01</span>
<span class="n">PTM_fbSerialLineControl</span><span class="p">(</span>
    <span class="n">Mode</span><span class="o">:=</span> <span class="n">SERIALLINEMODE_EL6_22B</span><span class="p">,</span>
    <span class="n">pComIn</span><span class="o">:=</span> <span class="n">ADR</span><span class="p">(</span><span class="n">PTM_stComIn</span><span class="p">),</span>
    <span class="n">pComOut</span><span class="o">:=</span><span class="n">ADR</span><span class="p">(</span><span class="n">PTM_stComOut</span><span class="p">),</span>
    <span class="n">SizeComIn</span><span class="o">:=</span> <span class="n">SIZEOF</span><span class="p">(</span><span class="n">PTM_stComOut</span><span class="p">),</span>
    <span class="n">TxBuffer</span><span class="o">:=</span> <span class="n">PTM_SerialTXBuffer</span><span class="p">,</span>
    <span class="n">RxBuffer</span><span class="o">:=</span> <span class="n">PTM_SerialRXBuffer</span><span class="p">,</span>
    <span class="n">Error</span><span class="o">=&gt;</span> <span class="p">,</span>
    <span class="n">ErrorID</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
</section>
<section id="prg-gauges">
<h2>PRG_GAUGES<a class="headerlink" href="#prg-gauges" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">PRG_GAUGES</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Switchbox</span> <span class="n">Gauges</span> <span class="o">*</span><span class="p">)</span>
    <span class="n">fb_PP_GPI_1</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_PP_GPI_1</span><span class="p">();</span>

    <span class="n">fb_PP_GPI_2</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_PP_GPI_2</span><span class="p">();</span>

    <span class="n">fb_DP_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_DP_GPI</span><span class="p">();</span>

    <span class="n">fb_PP_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_PP_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_PP_GPI_1</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

    <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_DP_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_PP_GPI_1</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Transport</span> <span class="n">Tube</span> <span class="n">Gauges</span> <span class="o">*</span><span class="p">)</span>
<span class="o">//</span> <span class="n">LS1</span>
    <span class="n">fb_LS1_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LS1_GPI</span><span class="p">();</span>
    <span class="n">fb_LS1_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LS1_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LS1_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LS5</span>
    <span class="n">fb_LS5_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LS5_GPI</span><span class="p">();</span>
    <span class="n">fb_LS5_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LS5_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LS5_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LS8</span>
    <span class="n">fb_LS8_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LS8_GPI</span><span class="p">();</span>
    <span class="n">fb_LS8_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LS8_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LS8_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD2</span>
    <span class="n">fb_LD2_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD2_GPI</span><span class="p">();</span>
    <span class="n">fb_LD2_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD2_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD2_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD4</span>
    <span class="n">fb_LD4_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD4_GPI</span><span class="p">();</span>
    <span class="n">fb_LD4_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD4_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD4_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD6</span>
    <span class="n">fb_LD6_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD6_GPI</span><span class="p">();</span>
    <span class="n">fb_LD6_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD6_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD6_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD8</span>
    <span class="n">fb_LD8_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD8_GPI</span><span class="p">();</span>
    <span class="n">fb_LD8_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD8_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD8_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD9</span>
    <span class="n">fb_LD9_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD9_GPI</span><span class="p">();</span>
    <span class="n">fb_LD9_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD9_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD9_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD10</span>
    <span class="n">fb_LD10_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD10_GPI</span><span class="p">();</span>
    <span class="n">fb_LD10_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD10_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD10_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">LD14</span>
    <span class="n">fb_LD14_GPI</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD14_GPI</span><span class="p">();</span>
    <span class="n">fb_LD14_GCC</span><span class="o">.</span><span class="n">M_SetBits</span><span class="p">(</span><span class="mi">30518</span><span class="p">);</span>
    <span class="n">fb_LD14_GCC</span><span class="p">(</span><span class="n">PG</span> <span class="o">:=</span> <span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_LD14_GPI</span><span class="o">.</span><span class="n">PG</span> <span class="p">,</span> <span class="n">IG</span><span class="o">=&gt;</span> <span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Auto</span> <span class="n">switch</span> <span class="n">on</span> <span class="n">cold</span> <span class="n">cathode</span> <span class="n">gauges</span> <span class="k">if</span> <span class="n">interlock</span> <span class="n">permits</span> <span class="o">*</span><span class="p">)</span>

<span class="n">If</span> <span class="n">xGCC_Enable_SW</span> <span class="n">THEN</span>
    <span class="n">fb_PP_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LS1_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LS5_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LS8_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD2_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD4_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD6_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD8_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD9_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD10_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
    <span class="n">fb_LD14_GCC</span><span class="o">.</span><span class="n">M_HVE</span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>

    <span class="n">xGCC_Enable_SW</span> <span class="o">:=</span> <span class="kc">False</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#gvl-bts-vac">GVL_BTS_VAC</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="prg-pumps">
<h2>PRG_PUMPS<a class="headerlink" href="#prg-pumps" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">PRG_PUMPS</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Switchbox</span> <span class="n">pumps</span> <span class="o">*</span><span class="p">)</span>
<span class="n">fb_PP_PMF</span><span class="p">();</span>

<span class="o">//</span><span class="n">fb_PP_PTM</span><span class="p">(</span><span class="n">i_xExtIlkOK</span> <span class="o">:=</span> <span class="n">fb_PP_VVC</span><span class="o">.</span><span class="n">M_IsClosed</span><span class="p">());</span>
<span class="o">//</span><span class="n">F_TurboExtILKLogic_2</span><span class="p">(</span><span class="n">Turbo</span><span class="o">:=</span><span class="n">fb_PP_PTM</span><span class="o">.</span><span class="n">iq_stPTM</span><span class="p">,</span>
<span class="o">//</span><span class="n">BackingGauge</span><span class="o">:=</span> <span class="p">,</span> <span class="n">InletGauge</span><span class="o">:=</span><span class="p">,</span> <span class="n">ScrollPump</span><span class="o">:=</span><span class="n">fb_PP_PMF</span><span class="o">.</span><span class="n">q_stPump</span><span class="p">));</span>
<span class="o">//</span><span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_PP_PTM</span><span class="p">(</span><span class="n">i_xExtIlkOK</span> <span class="o">:=</span> <span class="n">F_PumpStationTurboPumpInterlock</span><span class="p">());</span>

<span class="n">fb_PP_PTM</span><span class="p">(</span><span class="n">i_xExtIlkOK</span> <span class="o">:=</span> <span class="n">F_TurboExtILKLogic</span><span class="p">(</span><span class="n">Turbo</span><span class="o">:=</span><span class="n">fb_PP_PTM</span><span class="o">.</span><span class="n">iq_stPTM</span><span class="p">,</span> <span class="n">BackingGauge</span><span class="o">:=</span><span class="n">fb_PP_GPI_2</span><span class="o">.</span><span class="n">PG</span><span class="p">,</span>
                                <span class="n">InletGauge</span><span class="o">:=</span><span class="n">fb_PP_GPI_1</span><span class="o">.</span><span class="n">PG</span><span class="p">,</span> <span class="n">VentValve</span><span class="o">:=</span><span class="n">fb_PP_VVC</span><span class="o">.</span><span class="n">iq_stValve</span><span class="p">,</span>
                                <span class="n">ScrollPump</span><span class="o">:=</span><span class="n">fb_PP_PMF</span><span class="o">.</span><span class="n">q_stPump</span><span class="p">));</span>

<span class="n">fb_PP_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Transport</span> <span class="n">Tube</span> <span class="n">pumps</span> <span class="o">*</span><span class="p">)</span>
<span class="o">//</span> <span class="n">LS1</span>
<span class="n">fb_LS1_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LS1_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LS5</span>
<span class="n">fb_LS5_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LS5_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LS8</span>
<span class="n">fb_LS8_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LS8_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD2</span>
<span class="n">fb_LD2_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD2_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD4</span>
<span class="n">fb_LD4_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD4_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD6</span>
<span class="n">fb_LD6_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD6_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD8</span>
<span class="n">fb_LD8_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD8_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD9</span>
<span class="n">fb_LD9_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD9_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD10</span>
<span class="n">fb_LD10_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD10_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">LD14</span>
<span class="n">fb_LD14_PIP</span><span class="p">(</span><span class="n">i_stGauge</span> <span class="o">:=</span> <span class="n">fb_LD14_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span> <span class="n">stPump</span><span class="o">=&gt;</span><span class="p">);</span>

<span class="p">(</span><span class="o">*</span><span class="n">Serial</span> <span class="n">Interface</span><span class="o">*</span><span class="p">)</span>
<span class="p">(</span><span class="o">*</span><span class="n">Assign</span> <span class="n">adresses</span> <span class="n">to</span> <span class="n">the</span> <span class="n">pfeiffer</span> <span class="n">controller</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">this</span> <span class="n">serial</span> <span class="n">terminal</span><span class="o">*</span><span class="p">)</span>
<span class="n">st_Pfeiffer_CTRL_PTM</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iSerialAddress</span>  <span class="o">:=</span><span class="mi">1</span><span class="p">;</span>        <span class="o">//</span><span class="n">LXLHN_PTM_01</span>
<span class="n">st_Pfeiffer_CTRL_PTM</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">xEnableComm</span>         <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Instanitate</span> <span class="n">the</span> <span class="n">Function</span> <span class="n">block</span> <span class="k">for</span> <span class="n">serial</span> <span class="n">communication</span> <span class="k">with</span> <span class="n">Pfeiffer</span><span class="o">*</span><span class="p">)</span>
<span class="n">PTM_COM</span><span class="p">(</span><span class="n">astPfeifferControl</span> <span class="o">:=</span> <span class="n">st_Pfeiffer_CTRL_PTM</span><span class="p">,</span>
                <span class="n">astPfeifferStatus</span><span class="o">:=</span> <span class="n">st_Pfeiffer_RBK_PTM</span><span class="p">,</span>
                <span class="n">SerialRXBuffer</span><span class="o">:=</span> <span class="n">PTM_SerialRXBuffer</span><span class="p">,</span>
                <span class="n">SerialTXBuffer</span><span class="o">:=</span> <span class="n">PTM_SerialTXBuffer</span><span class="p">);</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Copy</span> <span class="n">Status</span> <span class="n">Pv</span><span class="s1">&#39;s into the PTM structure*)</span>
<span class="n">fb_PP_PTM</span><span class="o">.</span><span class="n">M_Serial_IO</span><span class="p">(</span><span class="n">st_Pfeiffer_CTRL</span><span class="o">:=</span><span class="n">st_Pfeiffer_CTRL_PTM</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">st_Pfeiffer_RBK</span><span class="o">:=</span><span class="n">st_Pfeiffer_RBK_PTM</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#gvl-bts-vac">GVL_BTS_VAC</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="prg-runtests">
<h2>PRG_RunTests<a class="headerlink" href="#prg-runtests" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">PRG_RunTests</span>
<span class="n">VAR</span>
    <span class="n">fbRangeComparison</span> <span class="p">:</span> <span class="n">FB_TestRangeComparison</span><span class="p">;</span>
    <span class="n">fbShutterSafety</span> <span class="p">:</span> <span class="n">FB_TestShutterSafety</span><span class="p">;</span>
    <span class="n">fbCentroidTest</span> <span class="p">:</span> <span class="n">FB_Test_EpicsCentroidMonitor</span><span class="p">;</span>
    <span class="n">fbMotorTest</span> <span class="p">:</span> <span class="n">FB_Test_EpicsMotorMonitor</span><span class="p">;</span>

<span class="n">END_VAR</span>
<span class="n">TcUnit</span><span class="o">.</span><span class="n">RUN</span><span class="p">();</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#fb-testrangecomparison">FB_TestRangeComparison</a></p></li>
<li><p><a class="reference internal" href="#fb-testshuttersafety">FB_TestShutterSafety</a></p></li>
<li><p><a class="reference internal" href="#fb-test-epicscentroidmonitor">FB_Test_EpicsCentroidMonitor</a></p></li>
<li><p><a class="reference internal" href="#fb-test-epicsmotormonitor">FB_Test_EpicsMotorMonitor</a></p></li>
</ul>
</dd>
</dl>
</section>
<section id="prg-saveperistentvariables">
<h2>PRG_SavePeristentVariables<a class="headerlink" href="#prg-saveperistentvariables" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PROGRAM PRG_SavePeristentVariables
VAR
    fbWritePersistentData: FB_WritePersistentData;
    tonStart : TON;
    tonInterval : TON;
END_VAR
tonInterval(
    IN:=TRUE,
    PT:=T#1ms (* Write 1ms after startup of the PLC *)

);

tonStart(
    IN:=tonStart.Q AND NOT fbWritePersistentData.BUSY,
    PT:=T#1m (* Write every minute *)
);

fbWritePersistentData(
    NETID:=&#39;&#39;, (* This PLC *)
    PORT:=851, (* Application port! *)
    TMOUT:=T#10s,  (* Maximum time before considering this a failure *)
    START:=tonStart.Q OR tonInterval.Q (* Start with tonStart goes high or periodically *)
);

END_PROGRAM
</pre></div>
</div>
</section>
<section id="prg-valves">
<h2>PRG_VALVES<a class="headerlink" href="#prg-valves" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">PRG_VALVES</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Switchbox</span> <span class="n">valves</span> <span class="o">*</span><span class="p">)</span>
<span class="n">fb_PP_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_PP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="n">fb_PP_VVC</span><span class="p">(</span>
    <span class="n">i_xExtILK_OK</span> <span class="o">:=</span> <span class="n">fb_PP_VGC</span><span class="o">.</span><span class="n">M_IsClosed</span><span class="p">(),</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span>
<span class="p">);</span>

<span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_PP_VRC_1</span><span class="p">(</span>
    <span class="n">i_xExtILK_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span>
<span class="p">);</span>

<span class="n">GVL_BTS_VAC</span><span class="o">.</span><span class="n">fb_PP_VRC_2</span><span class="p">(</span>
    <span class="n">i_xExtILK_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span>
<span class="p">);</span>

<span class="n">fb_VP_VVC_1</span><span class="p">(</span>
    <span class="n">i_xExtILK_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span>
<span class="p">);</span>

<span class="n">fb_VP_VVC_2</span><span class="p">(</span>
    <span class="n">i_xExtILK_OK</span> <span class="o">:=</span> <span class="n">TRUE</span>
<span class="p">);</span>

<span class="p">(</span><span class="o">*</span> <span class="n">Transport</span> <span class="n">Tube</span> <span class="n">vavles</span> <span class="o">*</span><span class="p">)</span>
<span class="o">//</span> <span class="n">LS1</span>
<span class="n">fb_LS1_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LS1_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span><span class="p">,</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LS5</span>
<span class="n">fb_LS5_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LS5_GPI</span><span class="o">.</span><span class="n">PG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GPI</span><span class="o">.</span><span class="n">PG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LS8</span>
<span class="n">fb_LS8_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LS8_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD2</span>
<span class="n">fb_LD2_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD2_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD4</span>
<span class="n">fb_LD4_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD4_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD6</span>
<span class="n">fb_LD6_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD6_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD8</span>
<span class="n">fb_LD8_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD8_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD9</span>
<span class="n">fb_LD9_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD9_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD10</span>
<span class="n">fb_LD10_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD10_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">LD14</span>
<span class="n">fb_LD14_VGC</span><span class="p">(</span>
    <span class="n">i_stUSG</span> <span class="o">:=</span> <span class="n">fb_LD14_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_stDSG</span> <span class="o">:=</span> <span class="n">fb_DP_GCC</span><span class="o">.</span><span class="n">IG</span><span class="p">,</span>
    <span class="n">i_xDis_DPIlk</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">,</span>
    <span class="n">i_xEPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xPMPS_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xExt_OK</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">i_xOverrideMode</span> <span class="o">:=</span> <span class="n">xSystemOverrideMode_BTS</span><span class="p">,</span>
    <span class="n">io_fbFFHWO</span> <span class="o">:=</span> <span class="n">g_FFOut</span><span class="p">,</span>
    <span class="n">fbArbiter</span> <span class="o">:=</span> <span class="n">g_fbArbiter</span>
<span class="p">);</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
<dl class="simple">
<dt>Related:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#gvl-bts-vac">GVL_BTS_VAC</a></p></li>
</ul>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lcls-plc-las-bts_las_bts_epics.html" class="btn btn-neutral float-left" title="Data Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SLAC National Accelerator Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>